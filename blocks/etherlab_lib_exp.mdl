Library {
  Name			  "etherlab_lib_exp"
  Version		  6.4
  MdlSubVersion		  0
  SavedCharacterEncoding  "ISO-8859-1"
  LibraryType		  "BlockLibrary"
  SaveDefaultBlockParams  on
  SampleTimeColors	  off
  LibraryLinkDisplay	  "all"
  WideLines		  off
  ShowLineDimensions	  off
  ShowPortDataTypes	  off
  ShowLoopsOnError	  on
  IgnoreBidirectionalLines off
  ShowStorageClass	  off
  ShowTestPointIcons	  on
  ShowViewerIcons	  on
  SortedOrder		  off
  ExecutionContextIcon	  off
  ShowLinearizationAnnotations on
  ScopeRefreshTime	  0.035000
  OverrideScopeRefreshTime on
  DisableAllScopes	  off
  BlockNameDataTip	  off
  BlockParametersDataTip  off
  BlockDescriptionStringDataTip	off
  ToolBar		  on
  StatusBar		  on
  BrowserShowLibraryLinks off
  BrowserLookUnderMasks	  off
  Created		  "Tue Dec 27 14:12:39 2005"
  Creator		  "rich"
  UpdateHistory		  "UpdateHistoryNever"
  ModifiedByFormat	  "%<Auto>"
  LastModifiedBy	  "rich"
  ModifiedDateFormat	  "%<Auto>"
  LastModifiedDate	  "Mon Jun 30 11:45:53 2008"
  ModelVersionFormat	  "1.%<AutoIncrement:576>"
  ConfigurationManager	  "rcs"
  LinearizationMsg	  "none"
  Profile		  off
  ParamWorkspaceSource	  "MATLABWorkspace"
  CovSaveName		  "covdata"
  CovMetricSettings	  "dw"
  CovNameIncrementing	  off
  CovHtmlReporting	  on
  covSaveCumulativeToWorkspaceVar on
  CovSaveSingleToWorkspaceVar on
  CovCumulativeReport	  off
  CovReportOnPause	  on
  ExtModeBatchMode	  off
  ExtModeEnableFloating	  on
  ExtModeTrigType	  "manual"
  ExtModeTrigMode	  "normal"
  ExtModeTrigPort	  "1"
  ExtModeTrigElement	  "any"
  ExtModeTrigDuration	  1000
  ExtModeTrigDurationFloating "auto"
  ExtModeTrigHoldOff	  0
  ExtModeTrigDelay	  0
  ExtModeTrigDirection	  "rising"
  ExtModeTrigLevel	  0
  ExtModeArchiveMode	  "off"
  ExtModeAutoIncOneShot	  off
  ExtModeIncDirWhenArm	  off
  ExtModeAddSuffixToVar	  off
  ExtModeWriteAllDataToWs off
  ExtModeArmWhenConnect	  on
  ExtModeSkipDownloadWhenConnect off
  ExtModeLogAll		  on
  ExtModeAutoUpdateStatusClock off
  ProdHWDeviceType	  "32-bit Generic"
  ShowModelReferenceBlockVersion off
  ShowModelReferenceBlockIO off
  BlockDefaults {
    Orientation		    "right"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    NamePlacement	    "normal"
    FontName		    "Bitstream Charter"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
    ShowName		    on
  }
  BlockParameterDefaults {
    Block {
      BlockType		      Inport
      Port		      "1"
      UseBusObject	      off
      BusObject		      "BusObject"
      BusOutputAsStruct	      off
      PortDimensions	      "-1"
      SampleTime	      "-1"
      DataType		      "auto"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      SignalType	      "auto"
      SamplingMode	      "auto"
      LatchByDelayingOutsideSignal off
      LatchByCopyingInsideSignal off
      Interpolate	      on
    }
    Block {
      BlockType		      "S-Function"
      FunctionName	      "system"
      SFunctionModules	      "''"
      PortCounts	      "[]"
    }
    Block {
      BlockType		      SubSystem
      ShowPortLabels	      on
      Permissions	      "ReadWrite"
      PermitHierarchicalResolution "All"
      TreatAsAtomicUnit	      off
      SystemSampleTime	      "-1"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      RTWMemSecFuncInitTerm   "Inherit from model"
      RTWMemSecFuncExecute    "Inherit from model"
      RTWMemSecDataConstants  "Inherit from model"
      RTWMemSecDataInternal   "Inherit from model"
      RTWMemSecDataParameters "Inherit from model"
      SimViewingDevice	      off
      DataTypeOverride	      "UseLocalSettings"
      MinMaxOverflowLogging   "UseLocalSettings"
    }
    Block {
      BlockType		      TriggerPort
      TriggerType	      "rising"
      StatesWhenEnabling      "inherit"
      ShowOutputPort	      off
      OutputDataType	      "auto"
      SampleTimeType	      "triggered"
      SampleTime	      "1"
      ZeroCross		      on
    }
  }
  AnnotationDefaults {
    HorizontalAlignment	    "center"
    VerticalAlignment	    "middle"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    FontName		    "Bitstream Charter"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  LineDefaults {
    FontName		    "Bitstream Charter"
    FontSize		    9
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  System {
    Name		    "etherlab_lib_exp"
    Location		    [747, 601, 1342, 994]
    Open		    on
    ModelBrowserVisibility  off
    ModelBrowserWidth	    200
    ScreenColor		    "white"
    PaperOrientation	    "landscape"
    PaperPositionMode	    "auto"
    PaperType		    "usletter"
    PaperUnits		    "inches"
    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
    TiledPageScale	    1
    ShowPageBoundaries	    off
    ZoomFactor		    "100"
    ReportName		    "simulink-default.rpt"
    Block {
      BlockType		      SubSystem
      Name		      "AddiData"
      Ports		      []
      Position		      [295, 134, 366, 195]
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      MaskHideContents	      off
      System {
	Name			"AddiData"
	Location		[1047, 745, 1395, 994]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"A4"
	PaperUnits		"centimeters"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  "S-Function"
	  Name			  "1710_Chronos"
	  Ports			  [0, 1]
	  Position		  [30, 29, 100, 61]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ad1710_chronos"
	  Parameters		  "b_BoardHandle,b_ModuleNumber,b_ChronoMode,b"
"_PCIInputClock,b_TimeUnit,ul_TimeOut,b_TimeoutUnit"
	  MaskPromptString	  "Board Handle|Module Number|Chrono Mode|PCI "
"Input Clock|Time Unit|Timeout|Timeout Unit"
	  MaskStyleString	  "edit,popup(0|1|2|3),popup(0|1|2|3|4|5|6|7),"
"popup(30MHz|33MHz|40MHz),popup(Nanoseconds|Microseconds|Milliseconds|Seconds|"
"Minutes),edit,popup(Nanoseconds|Micoseconds|Milliseconds|Seconds|Minutes)"
	  MaskTunableValueString  "off,off,off,off,off,off,off"
	  MaskCallbackString	  "||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,"
	  MaskVariables		  "b_BoardHandle=@1;b_ModuleNumber=@2;b_Chrono"
"Mode=@3;b_PCIInputClock=@4;b_TimeUnit=@5;ul_TimeOut=@6;b_TimeoutUnit=@7;"
	  MaskDisplay		  "fprintf('1710 Chrono\\nB:%i M/d:%i',\nb_Boa"
"rdHandle,b_ModuleNumber);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|0|0|30MHz|Microseconds|0|Micoseconds"
	  MaskTabNameString	  ",,,,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "1710_ETM"
	  Ports			  [0, 3]
	  Position		  [170, 150, 250, 190]
	  BackgroundColor	  "yellow"
	  FunctionName		  "xPCI1710_etm"
	  Parameters		  "device,module,clock_src,divisor,op_type,tsa"
"mple"
	  MaskType		  "Addi Data 1710 ETM"
	  MaskDescription	  "This block implements the Edge Triggered Ti"
"mer Mode for the 1710 Addi Data timer card. \n"
	  MaskPromptString	  "PCI Device|Module Number|Clock Source|Clock"
" Divisor|Output Data Type |Output Full Scale|Output Offset|Sampling Time (-1 "
"inherited)"
	  MaskStyleString	  "edit,popup(0|1|2|3),popup(Internal 40MHz|PC"
"I Bus 33/30Mhz),edit,popup(double|single|int8|uint8|int16|uint16|int32|uint32"
"|boolean|Inherited via back propagation),edit,edit,edit"
	  MaskTunableValueString  "off,off,off,off,off,on,on,off"
	  MaskCallbackString	  "|||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,,"
	  MaskVariables		  "device=&1;module=@2;clock_src=@3;divisor=@4"
";op_type=@5;scale=@6;offset=@7;tsample=@8;"
	  MaskInitialization	  "device = test_var(device);"
	  MaskDisplay		  "fprintf('xPCI1710 ETM\\nPCI: %s\\nModule: %"
"i',\ndevice,module-1);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "01:0A|0|Internal 40MHz|1|double|0|0|0"
	  MaskTabNameString	  ",,,,,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "1710_INC"
	  Ports			  [0, 1]
	  Position		  [35, 160, 115, 200]
	  BackgroundColor	  "yellow"
	  FunctionName		  "xPCI1710_inc"
	  Parameters		  "device,module,mode,width,op_type,preset,tsa"
"mple"
	  MaskType		  "Addi Data 1710 INC"
	  MaskDescription	  "This block implements the Incremental Count"
"er Mode for the 1710 Addi Data timer card. \n"
	  MaskPromptString	  "PCI Device|Module Number|Mode |Counter Widt"
"h |Output Data Type |Preset Input|Sampling Time (-1 inherited)"
	  MaskStyleString	  "edit,popup(0|1|2|3),popup(Quadruple|Double|"
"Simple|Direct),popup(32-Bit|16-Bit),popup(double|single|int8|uint8|int16|uint"
"16|int32|uint32|boolean|Inherited via back propagation),checkbox,edit"
	  MaskTunableValueString  "off,off,off,off,off,off,off"
	  MaskCallbackString	  "||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,"
	  MaskVariables		  "device=&1;module=@2;mode=@3;width=@4;op_typ"
"e=@5;preset=@6;tsample=@7;"
	  MaskInitialization	  "device = test_var(device);"
	  MaskDisplay		  "fprintf('xPCI1710 INC\\nPCI: %s\\nModule: %"
"i',\ndevice,module-1);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "03:0E|0|Quadruple|32-Bit|double|off|0"
	  MaskTabNameString	  ",,,,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "old1710_ETM"
	  Ports			  [0, 1]
	  Position		  [30, 99, 100, 131]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ad1710_etm"
	  Parameters		  "b_BoardHandle,b_ModuleNumber,b_ClockSelecti"
"on,b_TimingUnit,ul_Timing"
	  MaskType		  "Addi Data 1710 ETM"
	  MaskDescription	  "This block implements the Edge Triggered Mo"
"de for the 1710 Addi Data timer card. \n\nBoth counters are exported as a vec"
"tor."
	  MaskPromptString	  "Board Handle|Module Number|Clock Selection|"
"Timing Unit|Time Base"
	  MaskStyleString	  "edit,popup(0|1|2|3),popup(PCI 30MHz|PCI 33M"
"Hz|Internal 40MHz),popup(Nanoseconds|Microseconds|Milliseconds),edit"
	  MaskTunableValueString  "off,off,off,off,off"
	  MaskCallbackString	  "||||"
	  MaskEnableString	  "on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on"
	  MaskVarAliasString	  ",,,,"
	  MaskVariables		  "b_BoardHandle=@1;b_ModuleNumber=@2;b_ClockS"
"election=@3;b_TimingUnit=@4;ul_Timing=@5;"
	  MaskDisplay		  "fprintf('1710 ETM\\nB:%i M/d:%i',\nb_BoardH"
"andle,b_ModuleNumber);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|0|PCI 30MHz|Microseconds|0"
	  MaskTabNameString	  ",,,,"
	}
      }
    }
    Block {
      BlockType		      "S-Function"
      Name		      "Catch"
      Ports		      [0, 1]
      Position		      [70, 240, 130, 270]
      BackgroundColor	      "orange"
      InitFcn		      "catch_check(gcb,'CheckIds');"
      FunctionName	      "catch"
      Parameters	      "ErrId,dtype,Width,TSample"
      MaskPromptString	      "Error Identifier|Output Data Type Mode |Sample "
"Time (-1 inherited)|Width|Source Paths (Info only)|Source Count"
      MaskStyleString	      "edit,popup(double|single|int8|uint8|int16|uint1"
"6|int32|uint32|boolean|Inherit via back propagation),edit,edit,edit,edit"
      MaskTunableValueString  "off,off,off,off,off,off"
      MaskCallbackString      "catch_check(gcb,'CheckIds');|||||"
      MaskEnableString	      "on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,off"
      MaskToolTipString	      "on,on,on,on,on,on"
      MaskVarAliasString      ",,,,,"
      MaskVariables	      "ErrId=&1;dtype=@2;TSample=@3;Width=@4;SrcPath=&"
"5;SrcCount=@6;"
      MaskDisplay	      "fprintf('%s',ErrId);"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "E10|boolean|0|0|0|0"
      MaskTabNameString	      ",,,,,"
    }
    Block {
      BlockType		      SubSystem
      Name		      "EtherCAT"
      Ports		      []
      Position		      [295, 39, 366, 100]
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      MaskHideContents	      off
      System {
	Name			"EtherCAT"
	Location		[898, 626, 1395, 994]
	Open			on
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"A4"
	PaperUnits		"centimeters"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  "S-Function"
	  Name			  "AIN_0"
	  Ports			  [0, 1]
	  Position		  [25, 80, 105, 120]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ec_slave2"
	  Parameters		  "Address,EtherCATInfo,LayoutVersion,SdoConfi"
"g,output,tsample"
	  MaskType		  "EL31xx"
	  MaskDescription	  "Beckhoff 2,4,8-Channel 16-Bit Analog Input"
"\n\nOutput Type:\n  1-Byte output: one bit coded input\n  Vector output: Outp"
"ut vector is <Channels> wide\n  Separate outputs: have <Channels> number of o"
"utputs\n\nInput Gain/Offset:\n  Specify a possible Gain and Offset for the in"
"put signal"
	  MaskHelp		  "This block generically implements the Ether"
"CAT 16-Bit Analog Input Terminal for various models.\n<p/>\nThe following Ter"
"minals are supported:\n<center>\n<table width=\"80%\">\n<tr><td>EL3102,4,8</t"
"d><td>-10..10V Voltage Input</td></tr>\n<tr><td>EL3112,4   </td><td>0..20mA C"
"urrent Input</td></tr>\n<tr><td>EL3122,4   </td><td>4..20mA Current Input</td"
"></tr>\n<tr><td>EL3142,4,8</td><td>0..20mA Current Input</td></tr>\n<tr><td>E"
"L3152,4,8</td><td>4..20mA Current Input</td></tr>\n<tr><td>EL3162,4,8</td><td"
">0..10V Voltage Input</td></tr>\n</table>\n</center>\n<p/>\nChoose and set th"
"e following options:\n<h4>Master:</h4>\nSet the EtherCAT Master of this termi"
"nal.\n\n<h4>Slave Index:</h4>\nSet the EtherCAT slave index. Following addres"
"s formats are allowed:\n<ol>\n<li> Absolute addressing: a number <<b><tt>n</t"
"t></b>> representing the (zero based) absolute index. <b><tt>n</tt></b> is ty"
"pically larger than 0 because the first coupler has that address.\n\n<li> Fie"
"ld addressing: Has the form <<b><tt>f:n</tt></b>> where <b><tt>f</tt></b> is "
"the (zero based) EtherCAT coupler field and \n<b><tt>n</tt></b> is the termin"
"al offset in that field. Take note that <b><tt>n</tt></b> is also greater tha"
"n 0.\n\n<li> SSId addressing: the Secondary Slave Addressing has the form <<b"
"><tt>#s:n</tt></b>> where <b><tt>s</tt></b> is the Secondary Slave Id of the "
"EtherCAT coupler and <b><tt>n</tt></b> is the offset in that field. The SSId "
"has to be preprogrammed into the coupler with other service tools.\n</ol>\n\n"
"<h4>Device Model:</h4>\nChoose the model at the Indexed position of the maste"
"r.\n\n<h4>Output Type:</h4>\n<ul>\n<li>Choose <b>Vector Output</b> to have a "
"single output as a vector\nwith a size corresponding to the channel count of "
"the terminal. This mode also allows a status output port to be displayed. <br"
"/>\n<li>Choose <b>Separate Outputs</b> to have one output for every channel."
"\n</ul>\n<h4>Output Full Scale</h4>\nWhen <b>Output Data Type</b> is set to <"
"b>Double with scale and offset</b>, the block's output value at full scale te"
"rminal input can be set here.\n\n<h4>Output Offset</h4>\nWhen <b>Output Data "
"Type</b> is set to <b>Double with scale and offset</b>, the blocks output at "
"zero terminal input can be set here. Note that the Full Scale above is also i"
"ncreased by this amount. Note furthermore that this corresponds to the minimu"
"m input for terminals such as 4..20mA.\n\n<h4>Output Data Type</h4>\nChoose t"
"he block's output data type for the output signal. Available are:\n<ul>\n<li>"
"<b><tt>Raw</tt></b> outputting the internal raw value as <tt>int16_T</tt> or "
"<tt>uint16_T</tt> as appropriate\n<li><b><tt>Double</tt></b> outputting 0..10"
", -10..10, 0..0.02 and 0.004..0.02 depending on the Model as appropriate\n<li"
"><b><tt>Double with scale and offset</tt></b>, allowing the output to be scal"
"ed with an offset.\n</ul>\n\n<p>\nChoosing <b>Status Output</b> provides a po"
"rt of type <tt>uint8_T</tt> where the status is presented. This is only enabl"
"ed when <b>Vector Output</b> is selected. Terminal input over- and underrange"
" can be detected using this output. See the terminal's documentation.\n\n<h4>"
"Output Filter</h4>\nWhen not in <b>Raw</b> mode, the <b>Output Filter</b> che"
"ckbox becomes available, allowing the use of an internal low pass filter. Ent"
"er the <b>LPF Time Constant</b> for the filter in the field below.\n<br>For c"
"ontinuous sample time systems (0 in Sample Time), the filter is also continuo"
"us. Discrete samples systems (Sample Time > 0) uses an equivalent discrete lo"
"w pass filter with a similar time constant.\n\n<p>\nSet the <b>Sample Time</b"
"> for the block. <tt>0</tt> is continuous sample time (runs at the model's ba"
"se rate). Setting <tt>-1</tt> will try to set the time using back propagation"
".\n"
	  MaskPromptString	  "Master|Slave Index|Device Model |Output Typ"
"e |Output Full Scale|Output Offset|Output Data Type|Status Output|Output Filt"
"er|LPF Time Constant (sec)|Sample Time"
	  MaskStyleString	  "edit,edit,popup(EL3102|EL3152|EL3162),popup"
"(Vector Output|Separate Outputs),edit,edit,popup(Raw bits|Double|Double with "
"scale and offset),checkbox,checkbox,edit,edit"
	  MaskTunableValueString  "off,off,off,off,off,off,off,off,off,off,off"
	  MaskCallbackString	  "|||el31xx_check('output_type');\n|||el31xx_"
"check('dtype');||el31xx_check('filter');||"
	  MaskEnableString	  "on,on,on,on,off,off,on,on,on,off,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,,,,,"
	  MaskVariables		  "master=@1;index=@2;model=&3;output_type=@4;"
"scale=@5;offset=@6;dtype=@7;status=@8;filter=@9;tau=@10;tsample=@11;"
	  MaskInitialization	  "try\n    [master domain alias position mast"
"erStr positionStr] = ...\n        getEtherCATLocation(gcb,master,index);\ncat"
"ch\n    errordlg(lasterr);\n    masterStr = '';\n    positionStr = '';\nend\n"
"\nAddress = struct(...\n    'Master',   master, ...\n    'Domain',   domain, "
"...\n    'Alias',    alias, ...\n    'Position', position);\n\nSdoConfig = []"
";\n\n% Find the product code from the available models\nmodels = { ...\n    '"
"3102' hex2dec('0C1E3052') '-10..10V' -1; ...\n    '3152' hex2dec('0C503052') "
"'4..20mA'   1; ...\n    '3162' hex2dec('0C5A3052') '0-10V'     1; ...\n    };"
"\nproduct_code = 0;\nfunc = '';\nsign = 0;\nif size(model,2) >= 6\n    idx = "
"find(strcmp(models(:,1),model(3:6)));\n    if ~isempty(idx)\n        product_"
"code  = cell2mat(models(idx,2));\n        func          = cell2mat(models(idx"
",3));\n        sign          = cell2mat(models(idx,4));\n    end\nend\nif ~pr"
"oduct_code\n    errordlg([gcb ': Slave model \"' model '\" is not implemented"
"'])\nend\n\nEtherCATInfo = struct(...\n    'VendorId', 2,...\n    'ProductCod"
"e', product_code, ...\n    'Type', model, ...\n    'RevisionNo', 0, ...\n    "
"'SyncManager', cell(1));\nLayoutVersion = 0;\n\nEtherCATInfo.SyncManager{1} ="
" struct(...\n    'SmIndex', 0,...\n    'SmDir', 1, ...\n    'Pdo',[]...\n    "
");\n\n% Number of channels is given by the 6'th character of model string\nch"
"annels = str2double(model(6));\n\n% PDO Entry is a definition of all PDO's th"
"at exist in the slave\n% List here a matrix, where every row has 3 elements:"
"\n% 1: PDO index\n% 2: PDO subindex\n% 3: Bit size (8,16,32); Negative values"
" mean signed values\npdo_entry = repmat([0 1 8 8; 0 2 16 sign*16], channels, "
"1);\n% First column of pdo_entry = [0x3101 0x3101 0x3102 0x3102 ...]'\npdo_en"
"try(:,1) = ...\n    hex2dec('3100') + reshape([1:channels; 1:channels],2*chan"
"nels,1);\n\npdo_entry_struct = cell2struct(...\n    num2cell(pdo_entry),...\n"
"    {'Index' 'SubIndex' 'BitLen' 'DataType'},...\n    2);\n\npdo = struct('In"
"dex',0,'Entry',{}); \nfor i = [1:channels], \n    pdo(i) = struct(...\n      "
"  'Index',hex2dec('1A00')+i-1,...\n        'Entry',pdo_entry_struct([2*i:2*i+"
"1]-1)); \nend\nEtherCATInfo.SyncManager{1} = struct(...\n    'SmIndex', 3,..."
"\n    'SmDir', 1, ...\n    'Pdo',pdo...\n    );\n\n% This maps ???\n% It is a"
" matrix, every row having 4 elements:\n% 1: PDO direction as seen by the slav"
"e: 0 = output; 1 = Input\n% 2: PDO Index\n% 3: Starting row of PDO entry (Zer"
"o based)\n% 4: Number of PDO entry rows\n\npdo_map = pdo_entry([1:channels]*2"
",[1 2]);\nif output_type == 1\n    % Vector output chosen\n\n    output.PdoEn"
"try = pdo_map;\n\n    if dtype ~= 1\n        output.PdoFullScale = 2^15;\n   "
"     \n        if dtype == 3\n            output.Gain = scale;\n            o"
"utput.Offset = offset;\n            output.GainName = 'FullScale';\n         "
"   output.OffsetName = 'Offset';\n        end\n        if filter\n           "
" if sum(tau == 0)\n                errordlg([gcb ': Specify a nonzero time co"
"nstant '...\n                    'for the output filter.']);\n            end"
"\n            if (tsample)\n                output.Filter = tsample./tau;\n  "
"              output.FilterName = 'InputWeight';\n            else\n         "
"       output.Filter = 2*pi./tau;\n                output.FilterName = 'Omega"
"';\n            end\n        end\n    end\n\n    if status\n        output(2)"
".PdoEntry = pdo_entry([1:channels]*2-1,[1 2]);\n    end\n\nelse\n    % Separa"
"te outputs chosen\n    % Distribute each row of output_pdo_map to output(x).p"
"do_map\n    output = struct('PdoEntry', mat2cell(pdo_map,ones(1,channels),2))"
";\n\n    if dtype ~= 1\n        for i = 1:channels\n            output(i).Pdo"
"FullScale = 2^15;\n        end\n        \n        if dtype == 3\n            "
"if ~isempty(scale)\n                for i = 1:channels\n                    %"
" Choose scale(1) for every output if scale\n                    % is a scalar"
"\n                    output(i).Gain = scale(min(i,max(size(scale))));\n     "
"               output(i).GainName = ['FullScale' num2str(i)];\n              "
"  end\n            end\n\n            if ~isempty(offset)\n                fo"
"r i = 1:channels\n                    % Choose offset(1) for every output if "
"offset\n                    % is a scalar\n                    output(i).Offs"
"et = offset(min(i,max(size(offset))));\n                    output(i).OffsetN"
"ame = ['Offset' num2str(i)];\n                end\n            end\n        e"
"nd\n\n        if filter && ~isempty(tau)\n            if sum(tau == 0)\n     "
"           errordlg([gcb ': Specify a nonzero time constant '...\n           "
"         'for the output filter.']);\n            end\n\n            if tsamp"
"le(1)\n                k = tsample(1)./tau;\n                prefix = 'InputW"
"eight';\n            else\n                k = 2*pi./tau;\n                pr"
"efix = 'Omega';\n            end\n            for i = 1:channels\n           "
"     % Choose k(1) for every output if k\n                % is a scalar\n    "
"            output(i).Filter = k(min(i,max(size(k))));\n                outpu"
"t(i).FilterName = [prefix num2str(i)];\n            end\n            \n      "
"  end\n    end\nend\n"
	  MaskDisplay		  "fprintf('%s\\n%s AIn\\nM:%s Idx:%s',...\n  "
"  model,func,masterStr,positionStr)\n\n"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|1|EL3102|Vector Output|1|0|Double|off|off"
"|0.1|0"
	  MaskTabNameString	  ",,,,,,,,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "AOUT_0"
	  Ports			  [1]
	  Position		  [180, 80, 260, 120]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ec_slave2"
	  Parameters		  "Address,EtherCATInfo,LayoutVersion,SdoConfi"
"g,input,tsample"
	  MaskType		  "EL41xx"
	  MaskDescription	  "Beckhoff 2,4,8-Channel 16-Bit Analog Output"
"\n\nInput Type:\n  1-Byte input: one bit coded input\n  Vector input: Input v"
"ector is <Channels> wide\n  Separate inputs: have <Channels> number of inputs"
"\n"
	  MaskHelp		  "This block generically implements the Ether"
"CAT 16-Bit Analog Input Terminal for various models.\n<p/>\nThe block input i"
"s generally a <tt>double</tt> corresponding the the terminal's capability. Th"
"us a 4..20mA terminal expects values in the range [0.004..0.02). If a digital"
" input is required, only <tt>uint16</tt> or <tt>int16</tt> is accepted, depen"
"ding on whether the the terminal is bipolar or not.\n<p/>\nExceeding the inpu"
"t range simply saturates the terminal's output.\n<p/>\nThe following Terminal"
"s are supported:\n<center>\n<table width=\"80%\">\n<tr><td>EL4102,4,8</td><td"
">0..10V Voltage Output</td></tr>\n<tr><td>EL4112,4,8</td><td>0..20mA Current "
"Output</td></tr>\n<tr><td>EL4122,4,8</td><td>4..20mA Current Output</td></tr>"
"\n<tr><td>EL4132,4,8</td><td>-10..10V Voltage Output</td></tr>\n</table>\n</c"
"enter>\n<p/>\nChoose and set the following options:\n<h4>Master:</h4>\nSet th"
"e EtherCAT Master of this terminal.\n\n<h4>Slave Index:</h4>\nSet the EtherCA"
"T slave index. Following address formats are allowed:\n<ol>\n<li> Absolute ad"
"dressing: a number <<b><tt>n</tt></b>> representing the (zero based) absolute"
" index. <b><tt>n</tt></b> is typically larger than 0 because the first couple"
"r has that address.\n\n<li> Field addressing: Has the form <<b><tt>f:n</tt></"
"b>> where <b><tt>f</tt></b> is the (zero based) EtherCAT coupler field and \n"
"<b><tt>n</tt></b> is the terminal offset in that field. Take note that <b><tt"
">n</tt></b> is also greater than 0.\n\n<li> SSId addressing: the Secondary Sl"
"ave Addressing has the form <<b><tt>#s:n</tt></b>> where <b><tt>s</tt></b> is"
" the Secondary Slave Id of the EtherCAT coupler and <b><tt>n</tt></b> is the "
"offset in that field. The SSId has to be preprogrammed into the coupler with "
"other service tools.\n</ol>\n\n<h4>Device Model:</h4>\nChoose the device at t"
"he Indexed position of the master.\n\n<h4>Input Type:</h4>\n<ul>\n<li>Choose "
"<b>Vector Input</b> to have a single input as a vector\nwith a size correspon"
"ding to the channel count of the terminal. This mode also allows a control in"
"put and a status output port to be displayed.\n<li>Choose <b>Separate Inputs<"
"/b> to have one input for every channel.\n</ul>\n\n<p>\nChoosing <b>Status Ou"
"tput</b> provides a port of type <tt>uint8_T</tt> where the status is present"
"ed. This is only enabled when <b>Vector Output</b> is selected. Note: at the "
"time of writing (1.2.2006) the terminals do not have a status output, and hen"
"ce this option is disabled!\n\n<p>\nSet the <b>Sample Time</b> for the block."
" <tt>0</tt> is continuous sample time (runs at the model's base rate). Settin"
"g <tt>-1</tt> will try to set the time using back propagation.\n"
	  MaskPromptString	  "Master|Slave Index|Device Model |Input Type"
" |Input Full Scale (empty for none)|Sample Time (-1 for inherited)"
	  MaskStyleString	  "edit,edit,popup(EL4102|EL4112|EL4122|EL4132"
"v2|-- Obsolete|EL4132),popup(Vector Input|Separate Inputs),edit,edit"
	  MaskTunableValueString  "off,off,off,off,off,off"
	  MaskCallbackString	  "|||\n||"
	  MaskEnableString	  "on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,"
	  MaskVariables		  "master=@1;index=@2;model=&3;input_type=@4;s"
"cale=@5;tsample=@6;"
	  MaskInitialization	  "try\n    [master domain alias position mast"
"erStr positionStr] = ...\n        getEtherCATLocation(gcb,master,index);\ncat"
"ch\n    errordlg(lasterr);\n    masterStr = '';\n    positionStr = '';\nend\n"
"\nAddress = struct(...\n    'Master',   master, ...\n    'Domain',   domain, "
"...\n    'Alias',    alias, ...\n    'Position', position);\n\nSdoConfig = []"
";\n\nmodels = { ...\n%   Model  ProductCode         Function SignedPDODataTyp"
"e DefaultLayout\n    '4102' hex2dec('10063052') '0..10V'  1                1;"
" ...\n    '4132' hex2dec('10243052') '+-10V'  -1                0; ...\n    '"
"4122' hex2dec('101a3052') '4..20mA' 1                1; ...\n    '4112' hex2d"
"ec('10103052') '0..20mA' 1                1; ...\n    };\nproduct_code = 0;\n"
"func = '';\nsigned = 0;\ndefault_layout = 0;\nif size(model,2) >= 6\n    idx "
"= find(strcmp(models(:,1),model(3:6)));\n    if ~isempty(idx)\n        produc"
"t_code   = cell2mat(models(idx,2));\n        func           = cell2mat(models"
"(idx,3));\n        signed         = cell2mat(models(idx,4));\n        default"
"_layout = cell2mat(models(idx,5));\n    end\nend\nif ~product_code\n    error"
"dlg([gcb ': Slave model \"' model '\" is not implemented'])\nend\n\n% Number "
"of channels is given by the 6'th character of model string\nchannels = str2do"
"uble(model(6));\n\n% PDO Entry is a definition of all PDO's that exist in the"
" slave\n% List here a matrix, where every row has 3 elements:\n% 1: PDO index"
"\n% 2: PDO subindex\n% 3: Bit size (8,16,32); Negative values mean signed val"
"ues\nif default_layout == 1 || ~isempty(findstr(model,'v2'))\n    LayoutVersi"
"on = 1;\n    % Create a matrix \n    % pdo_entry  = [ 0x6411 1 pdo_data_type;"
"\n    %                0x6411 2 pdo_data_type;\n    %                .... \n "
"   %               ]\n    % with (channel) number of rows\n    pdo_entry = re"
"pmat([hex2dec('6411') 1 16 signed*16], channels, 1);\n    pdo_entry(:,2) = 1:"
"channels;\nelse\n    LayoutVersion = 0;\n    % Create a matrix \n    % pdo_en"
"try  = [ 0x3001 1 pdo_data_type;\n    %                0x3002 1 pdo_data_type"
";\n    %                .... \n    %               ]\n    % with (channel) nu"
"mber of rows\n    pdo_entry = repmat([0 1 16 signed*16],channels,1);\n    pdo"
"_entry(:,1) = hex2dec('3000') + [1:channels]';\nend\npdo_entry_struct = cell2"
"struct(...\n    num2cell(pdo_entry),...\n    {'Index' 'SubIndex' 'BitLen' 'Da"
"taType'},...\n    2);\n\npdo = struct('Index',0,'Entry',{}); \nfor i = [1:cha"
"nnels], \n    pdo(i) = struct(...\n        'Index',hex2dec('1600')+i-1,...\n "
"       'Entry',pdo_entry_struct(i)); \nend\nEtherCATInfo.SyncManager{1} = str"
"uct(...\n    'SmIndex', 2,...\n    'SmDir', 0, ...\n    'Pdo',pdo...\n    );"
"\n\n% Vector output chosen\npdo_map = pdo_entry(:,[1 2]);\n\nif input_type =="
" 1\n    input.PdoEntry = pdo_map;\n    input.PdoFullScale = 2^15;\n    if ~is"
"empty(scale)\n        input.Gain = scale;\n        input.GainName = 'FullScal"
"e';\n    end\nelseif input_type == 2\n    input = struct( ...\n        'PdoEn"
"try', mat2cell(pdo_map,ones(1,channels),2), ...\n        'PdoFullScale', 2^15"
");\n    if ~isempty(scale)\n        for i = 1:channels\n            input(i)."
"Gain = scale(min(i,max(size(scale))));\n            input(i).GainName = ['Ful"
"lScale' num2str(i)];\n        end\n    end\nend\n"
	  MaskDisplay		  "fprintf('%s\\n%s AIn\\nM:%s Idx:%s',...\n  "
"  model,func,masterStr,positionStr)\n"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|1|EL4102|Vector Input|[]|-1"
	  MaskTabNameString	  ",,,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "DIN_0"
	  Ports			  [0, 1]
	  Position		  [25, 20, 105, 60]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ec_slave2"
	  Parameters		  "Address,EtherCATInfo,LayoutVersion,SdoConfi"
"g,IOSpec,tsample"
	  MaskType		  "EL10xx"
	  MaskDescription	  "Beckhoff EtherCAT Digital Input\nEL1002,4,8"
":	3ms filter\nEL1012,4,8:	10us filter\nEL1004v2: Newer version "
"with PDO at 0x6000\n\nOutput Type:\n  1-Byte output: one bit coded output\n  "
"Vector output: Output vector is <Channels> wide\n  Separate outputs: have <Ch"
"annels> number of outputs"
	  MaskHelp		  "This block implements the Beckhoff's EtherC"
"AT series of Digital Input Terminals.\n<p/>\nChoose or set the following opti"
"ons:\n<h4>Master:</h4>\nSet the EtherCAT Master number that this terminal is "
"connected to.\n\n<h4>Slave Index:</h4>\nSet the EtherCAT slave index. Followi"
"ng address formats are allowed:\n<ol>\n<li> Absolute addressing: a number <<b"
"><tt>n</tt></b>> representing the (zero based) absolute index. <b><tt>n</tt><"
"/b> is typically larger than 0 because the first coupler has that address.\n"
"\n<li> Field addressing: Has the form <<b><tt>f:n</tt></b>> where <b><tt>f</t"
"t></b> is the (zero based) EtherCAT coupler field and \n<b><tt>n</tt></b> is "
"the terminal offset in that field. Take note that <b><tt>n</tt></b> is also g"
"reater than 0.\n\n<li> SSId addressing: the Secondary Slave Addressing has th"
"e form <<b><tt>#s:n</tt></b>> where <b><tt>s</tt></b> is the Secondary Slave "
"Id of the EtherCAT coupler and <b><tt>n</tt></b> is the offset in that field."
" The SSId has to be preprogrammed into the coupler with other service tools."
"\n</ol>\n\n<h4> Device Model</h4>\nSelect the model that is used. This sets t"
"he number of outputs of this block.\n\n<h4>Output Type</h4>\nThe block output"
" type corresponding to the terminal inputs can be one of the following:\n<ul>"
"\n<li><b>1-Byte Output</b>: This sets one output where each digital input to "
"the terminal occupies one bit.\n<li><b>Vector Output</b>: This sets one outpu"
"t vector with a width equal to the number of digital inputs to the terminal. "
"\n<li><b>Separate Outputs</b>: This sets the number of outputs corresponding "
"to the digital inputs to the terminal. \n</ul>\n\n<h4>Output Data Type</h4>\n"
"Select the output data type that is required.\n\n<h4>Sample Time</h4>\nSelect"
" the correct sample time. Setting this to 0 makes for a sample time at the mo"
"del's base rate. If another block can set the sample time, choose -1 for inhe"
"rited sample time."
	  MaskPromptString	  "Master|Slave Index|Device Model |Output Typ"
"e|Sample Time"
	  MaskStyleString	  "edit,edit,popup(EL1004v2|EL1008|EL1014v2|EL"
"1018|-- Obsolete|EL1004|EL1014),popup(Vector Output|Separate Outputs),edit"
	  MaskTunableValueString  "off,off,off,off,off"
	  MaskCallbackString	  "||||"
	  MaskEnableString	  "on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on"
	  MaskVarAliasString	  ",,,,"
	  MaskVariables		  "master=@1;index=@2;model=&3;output_type=&4;"
"tsample=@5;"
	  MaskInitialization	  "try\n    [master domain alias position mast"
"erStr positionStr] = ...\n        getEtherCATLocation(gcb,master,index);\ncat"
"ch\n    errordlg(lasterr);\n    masterStr = '';\n    positionStr = '';\nend\n"
"\nAddress = struct(...\n    'Master',   master, ...\n    'Domain',   domain, "
"...\n    'Alias',    alias, ...\n    'Position', position);\n\nSdoConfig = []"
";\n\n% Find the product code from the available models\nmodels = { ...\n%   C"
"ode   Product Code        Uses new PDO's\n    '1004' hex2dec('03ec3052') 0; ."
"..\n    '1008' hex2dec('03f03052') 1;...\n    '1014' hex2dec('03f63052') 0; ."
"..\n    '1018' hex2dec('03fa3052') 1;...\n    };\nproduct_code = 0;\nnew_layo"
"ut = 0;\nif size(model,2) >= 6\n    idx = find(strcmp(models(:,1),model(3:6))"
");\n    if ~isempty(idx)\n        product_code  = cell2mat(models(idx,2));\n "
"       new_layout    = cell2mat(models(idx,3));\n    end\nend\nif ~product_co"
"de\n    errordlg([gcb ': Slave model \"' model '\" is not implemented'])\nend"
"\n\nEtherCATInfo = struct(...\n    'VendorId', 2,...\n    'ProductCode', prod"
"uct_code, ...\n    'Type', model, ...\n    'SyncManager', cell(1));\n\nEtherC"
"ATInfo.SyncManager{1} = struct(...\n    'SmIndex', 0,...\n    'SmDir', 1, ..."
"\n    'Pdo',[]...\n    );\n\n% Number of channels is given by the 6'th charac"
"ter of model string\nchannels = str2double(model(6));\nif new_layout || ~isem"
"pty(findstr(model,'v2'))\n    LayoutVersion = 1;\n    % Create a matrix \n   "
" % pdo_entry  = [ 0x6000 1 1;\n    %                0x6010 1 1;\n    %       "
"         .... \n    %               ]\n    % with (channel) number of rows\n "
"   pdo_entry = repmat([hex2dec('6000') 1 1 1],channels,1);\n    pdo_entry(:,1"
") = pdo_entry(:,1) + 16*[0:channels-1]';\nelse\n    LayoutVersion = 0;\n    %"
" Create a matrix \n    % pdo_entry  = [ 0x3101 1 1;\n    %                0x3"
"101 2 1;\n    %                .... \n    %               ]\n    % with (chan"
"nel) number of rows\n    pdo_entry = repmat([hex2dec('3101') 1 1 1],channels,"
"1);\n    pdo_entry(:,2) = [1:channels]';\nend\npdo_entry_struct = cell2struct"
"(...\n    num2cell(pdo_entry),...\n    {'Index' 'SubIndex' 'BitLen' 'DataType"
"'},...\n    2);\n\npdo = struct('Index',0,'Entry',{}); \nfor i = [1:channels]"
", \n    pdo(i) = struct('Index',hex2dec('1A00')+i-1,'Entry',pdo_entry_struct("
"i)); \nend\nEtherCATInfo.SyncManager{1} = struct(...\n    'SmIndex', 0,...\n "
"   'SmDir', 1, ...\n    'Pdo',pdo...\n    );\n\npdo_map = [pdo_entry(:,1) pdo"
"_entry(:,2)];\n\nif strcmp(output_type, 'Vector Output')\n    % Only one outp"
"ut, with all rows of pdo_map\n    IOSpec = struct('PdoEntry', pdo_map);\nelse"
"if strcmp(output_type, 'Separate Outputs')\n    % Have (channel) number of ou"
"tputs, each containing one row of pdo_map\n    IOSpec = struct('PdoEntry', ma"
"t2cell(pdo_map,ones(1,channels),2));\nelse\n    errordlg([gcb ': unknown outp"
"ut type: ' output_type]);\n    IOSpec = [];\nend\n"
	  MaskDisplay		  "fprintf('%s\\nM:%s Idx:%s',...\n    model,m"
"asterStr,positionStr)\n\n"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|1|EL1004v2|Vector Output|0"
	  MaskTabNameString	  ",,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "DOUT_0"
	  Ports			  [1]
	  Position		  [180, 20, 260, 60]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ec_slave2"
	  Parameters		  "Address,EtherCATInfo,LayoutVersion,SdoConfi"
"g,IOSpec,tsample"
	  MaskType		  "EL20xx"
	  MaskDescription	  "Beckhoff EtherCAT Digital Output\nEL2002,4:"
"	24V 0.5A\nEL2032:		24V 2A, Optional Status (with Vector"
" Input)\n\nInput Type:\n  1-Byte input: one bit coded input\n  Vector input: "
"Input vector is <Channels> wide\n  Separate inputs: have <Channels> number of"
" inputs\n"
	  MaskHelp		  "This block implements the Beckhoff's EtherC"
"AT series of Digital Output Terminals.\n<p/>\nChoose or set the following opt"
"ions:\n<h4>Master:</h4>\nSet the EtherCAT Master number that this terminal is"
" connected to.\n\n<h4>Slave Index:</h4>\nSet the EtherCAT slave index. Follow"
"ing address formats are allowed:\n<ol>\n<li> Absolute addressing: a number <<"
"b><tt>n</tt></b>> representing the (zero based) absolute index. <b><tt>n</tt>"
"</b> is typically larger than 0 because the first coupler has that address.\n"
"\n<li> Field addressing: Has the form <<b><tt>f:n</tt></b>> where <b><tt>f</t"
"t></b> is the (zero based) EtherCAT coupler field and \n<b><tt>n</tt></b> is "
"the terminal offset in that field. Take note that <b><tt>n</tt></b> is also g"
"reater than 0.\n\n<li> SSId addressing: the Secondary Slave Addressing has th"
"e form <<b><tt>#s:n</tt></b>> where <b><tt>s</tt></b> is the Secondary Slave "
"Id of the EtherCAT coupler and <b><tt>n</tt></b> is the offset in that field."
" The SSId has to be preprogrammed into the coupler with other service tools."
"\n</ol>\n\n<h4> Device Model</h4>\nSelect the model that is used. This sets t"
"he maximum number of inputs of this block. Having fewer inputs is allowed.<br"
">\n Some models have an optional status byte. These have the <b>Status Output"
"</b> below enabled.\n\n<h4>Input Type</h4>\nThe input type can be one of the "
"following:\n<ul>\n<li><b>1-Byte Input</b>: This sets one block input bit code"
"d corresponding to the digital output of the terminal.\n<li><b>Vector Input</"
"b>: This sets one input vector where each element corresponds to a digital ou"
"tput of the terminal.\n<li><b>Separate Inputs</b>: This sets the number of bl"
"ock inputs corresponding to the digital output count of the terminal. \n</ul>"
"\n\n<h4>Status Output</h4>\nSome models have a status bit to monitor the atta"
"ched hardware. Check this box to make it available as a block output in simul"
"ink. This option is not available if <b>Separate Inputs</b> is selected.\n\n<"
"h4>Sample Time</h4>\nSelect the correct sample time. Setting this to 0 makes "
"for a sample time at the model's base rate. If another block can set the samp"
"le time, choose -1 for inherited sample time."
	  MaskPromptString	  "Master|Slave Index|Device Model |Input Type"
"|Status Output|Sample Time (-1 for inherited)"
	  MaskStyleString	  "edit,edit,popup(EL2004v2|EL2008|EL2032v2|EL"
"2602|EL2612|EL2622|-- Obsolete|EL2004|EL2032),popup(Vector Input|Separate Inp"
"uts),checkbox,edit"
	  MaskTunableValueString  "off,off,off,off,off,off"
	  MaskCallbackString	  "||status_idx = find(strcmp(get_param(gcb,'M"
"askNames'),'status'));\n\nen = get_param(gcb,'MaskEnables');\n\nif findstr('2"
"032',get_param(gcb,'model'))\n        en{status_idx} = 'on';\nelse\n    en{st"
"atus_idx} = 'off';\nend\nset_param(gcb,'MaskEnables',en);\n|||"
	  MaskEnableString	  "on,on,on,on,off,on"
	  MaskVisibilityString	  "on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,"
	  MaskVariables		  "master=@1;index=@2;model=&3;input_type=&4;s"
"tatus=@5;tsample=@6;"
	  MaskInitialization	  "try\n    [master domain alias position mast"
"erStr positionStr] = ...\n        getEtherCATLocation(gcb,master,index);\ncat"
"ch\n    errordlg(lasterr);\n    masterStr = '';\n    positionStr = '';\nend\n"
"\nAddress = struct(...\n    'Master',   master, ...\n    'Domain',   domain, "
"...\n    'Alias',    alias, ...\n    'Position', position);\n\nSdoConfig = []"
";\n\n% Find the product code from the available models\nmodels = { ...\n% Mod"
"el    Vendor Id            Diagnostic  DefaultLayout\n    '2004' hex2dec('07d"
"43052')  0           0 ; ...\n    '2008' hex2dec('07d83052')  0           1 ;"
" ...\n    '2032' hex2dec('07f03052')  1           0 ; ...\n    '2602' hex2dec"
"('0a2a3052')  0           1 ; ...\n    '2612' hex2dec('0a343052')  0         "
"  1 ; ...\n    '2622' hex2dec('0a3e3052')  0           1 ; ...\n    };\nprodu"
"ct_code = 0;\ndiagnostic = 0;\ndefault_layout = 0;\nif size(model,2) >= 6\n  "
"  idx = find(strcmp(models(:,1),model(3:6)));\n    if ~isempty(idx)\n        "
"product_code = cell2mat(models(idx,2));\n        diagnostic   = cell2mat(mode"
"ls(idx,3));\n        default_layout   = cell2mat(models(idx,4));\n    end\nen"
"d\nif ~product_code\n    errordlg([gcb ': Slave model \"' model '\" is not im"
"plemented'])\nend\n\nEtherCATInfo = struct(...\n    'VendorId', 2,...\n    'P"
"roductCode', product_code, ...\n    'Type', model, ...\n    'RevisionNo', 0, "
"...\n    'SyncManager', cell(1));\n\nEtherCATInfo.SyncManager{1} = struct(..."
"\n    'SmIndex', 0,...\n    'SmDir', 0, ...\n    'Pdo',[]...\n    );\n\n% Num"
"ber of channels is given by the 6'th character of model string\nchannels = st"
"r2double(model(6));\nif default_layout == 1 || ~isempty(findstr(model,'v2'))"
"\n    LayoutVersion= 1;\n\n    pdo_entry = repmat([hex2dec('7000') 1 1 1],cha"
"nnels,1);\n    pdo_entry(:,1) = pdo_entry(:,1) + 16*[0:channels-1]';\n\n    i"
"f diagnostic\n        status_pdo_entry = repmat([hex2dec('6000') 1 1 1],chann"
"els,1);\n        status_pdo_entry(:,1) = status_pdo_entry(:,1) + 16*[0:channe"
"ls-1]';\n    end\nelse\n    LayoutVersion = 0;\n    % Create a matrix \n    %"
" pdo_entry  = [ 0x3001 1 1 1;\n    %                0x3001 2 1 1;\n    %     "
"           .... \n    %               ]\n    % with (channel) number of rows"
"\n    pdo_entry = repmat([hex2dec('3001') 1 1 1],channels,1);\n    pdo_entry("
":,2) = [1:channels]';\n    \n    if diagnostic\n        status_pdo_entry = re"
"pmat([hex2dec('3101') 1 1 1],channels,1);\n        status_pdo_entry(:,2) = [1"
":channels]';\n    end\nend\npdo_entry_struct = cell2struct(...\n    num2cell("
"pdo_entry),...\n    {'Index' 'SubIndex' 'BitLen' 'DataType'},...\n    2);\n\n"
"pdo = struct('Index',0,'Entry',{}); \nfor i = [1:channels], \n    pdo(i) = st"
"ruct(...\n        'Index',hex2dec('1600')+i-1,...\n        'Entry',pdo_entry_"
"struct(i)); \nend\nEtherCATInfo.SyncManager{1} = struct(...\n    'SmIndex', 0"
",...\n    'SmDir', 0, ...\n    'Pdo',pdo...\n    );\nif diagnostic\n    statu"
"s_pdo_entry_struct = cell2struct(...\n        num2cell(status_pdo_entry),..."
"\n        {'Index' 'SubIndex' 'BitLen' 'DataType'},...\n        2);\n\n    pd"
"o = struct('Index',0,'Entry',{});\n    for i = [1:channels],\n        pdo(i) "
"= struct(...\n            'Index',hex2dec('1A00')+i-1,...\n            'Entry"
"',status_pdo_entry_struct(i));\n    end\n    EtherCATInfo.SyncManager{2} = st"
"ruct(...\n        'SmIndex', 1,...\n        'SmDir', 1, ...\n        'Pdo',pd"
"o...\n        );\nend\n\npdo_map = [pdo_entry(:,1) pdo_entry(:,2)];\n\nif sta"
"tus && diagnostic\n    status_pdo_map = [status_pdo_entry(:,1) status_pdo_ent"
"ry(:,2)];\nelse\n    status_pdo_map = [];\nend\n\nIOSpec = [];\nif strcmp(inp"
"ut_type,'Vector Input')\n    IOSpec = struct('PdoEntry', pdo_map);\n    if si"
"ze(status_pdo_map)\n        IOSpec(2) = struct('PdoEntry', status_pdo_map);\n"
"    end\nelseif strcmp(input_type, 'Separate Inputs')\n    % Distribute each "
"row of input_pdo_map to input(x).pdo_map\n    IOSpec  = struct('PdoEntry', ma"
"t2cell(pdo_map,ones(1,channels),2));\n    if size(status_pdo_map)\n        St"
"atusIOSpec = struct('PdoEntry', mat2cell(status_pdo_map,ones(1,channels),2));"
"\n        IOSpec = [IOSpec StatusIOSpec];\n    end\nelse\n    errordlg([gcb '"
": unknown input type: ' input_type]);\nend\n\n"
	  MaskDisplay		  "fprintf('%s\\nM:%s Idx:%s',...\n    model,m"
"asterStr,positionStr)\n\n"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|1|EL2004v2|Vector Input|off|0"
	  MaskTabNameString	  ",,,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "Domain State"
	  Ports			  [0, 2]
	  Position		  [315, 81, 390, 114]
	  BackgroundColor	  "yellow"
	  FunctionName		  "domain_state"
	  Parameters		  "master,domain,input,output,tsample"
	  MaskType		  "Domain State"
	  MaskDescription	  "Displays the following domain state informa"
"tion:\n* Working Counter\n* Domain state:\n	0 - No slaves\n	1 -"
" Domain incomplete\n	2 - Domain complete"
	  MaskPromptString	  "Master|Domain|Direction|Sample Time"
	  MaskStyleString	  "edit,edit,popup(Input Only|Output Only|Inpu"
"t and Output),edit"
	  MaskTunableValueString  "off,off,off,off"
	  MaskCallbackString	  "|||"
	  MaskEnableString	  "on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on"
	  MaskToolTipString	  "on,on,on,on"
	  MaskVarAliasString	  ",,,"
	  MaskVariables		  "master=@1;domain=@2;direction=@3;tsample=@4"
";"
	  MaskInitialization	  "switch direction\n    case 1\n        input"
" = 1;\n        output = 0;\n    case 2\n        input = 0;\n        output = "
"1;\n    case 3\n        input = 1;\n        output = 1;\nend"
	  MaskDisplay		  "fprintf('Domain State\\nM:%u d:%u',\nmaster"
",domain);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|0|Input Only|0"
	  MaskTabNameString	  ",,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "ENC_0"
	  Ports			  [0, 1]
	  Position		  [25, 199, 105, 241]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ec_slave2"
	  Parameters		  "Address,EtherCATInfo,LayoutVersion,SdoConfi"
"g,IOSpec,tsample"
	  MaskType		  "EL5101"
	  MaskDescription	  "Beckhoff EtherCAT Incremental Encoder Input"
	  MaskHelp		  "This block implements the EtherCAT Incremen"
"tal Encoder Input Terminal EL5101.\n\nThe first output is data, the second op"
"tional output is a Status Byte. Various options affect the behaviour of the t"
"erminal and the block's output:\n\n<h4>Master:</h4>\nSet the EtherCAT Master "
"of this terminal.\n\n<h4>Slave Index:</h4>\nSet the EtherCAT slave index. Fol"
"lowing address formats are allowed:\n<ol>\n<li> Absolute addressing: a string"
" '<b><tt>n</tt></b>' representing the (zero based) absolute index. <b><tt>n</"
"tt></b> is typically larger than 0 because the first coupler has that address"
".\n\n<li> SSId addressing: the Secondary Slave Addressing has the form '<b><t"
"t>#s:n</tt></b>' where <b><tt>s</tt></b> is the Secondary Slave Id of the Eth"
"erCAT coupler and <b><tt>n</tt></b> is the offset in that field. The SSId has"
" to be preprogrammed into the coupler with other service tools.\n</ol>\n\n<h4"
">Configuration Parameters</h4>\n<dl>\n<dt><b><tt>Enable Register Reload</tt><"
"/b></dt> \n<dd>When the counter value wraps (either overflows or underflows),"
" reload the value specified in <em>Counter Reload Value</em>. This option can"
"not be used together with <em>Enable Index Reset</em></dd>\n\n<dt><b><tt>Enab"
"le Index Reset</tt></b></dt> \n<dd>activates terminal input \"C\", which rese"
"ts the counter value. This option cannot be used together with <em>Enable Reg"
"ister Reload</em>.</dd>\n\n<dt><b><tt>Enable FWD Count</tt></b></dt> \n<dd>di"
"sables quadrature evaluation of the \"A\" and \"B\" terminal inputs. Counter "
"only counts up.</dd>\n\n<dt><b><tt>Gate</tt></b></dt> \n<dd>\nStops the count"
"er on either <b>Rising</b> or <b>Falling</b> edge. This input is enabled when"
" <em>Latch Output Port</en> is enabled.\n</dd>\n\n<dt><b><tt>Frequency Window"
"</tt></b></dt>\n<dd>Value determines the width of the Window variable in incr"
"ements of 16us (whatever that means???) This input is enabled when <em>Freque"
"ncy Output Port</em> is selected</dd>\n\n<dt><b><tt>Counter Reload Value</tt>"
"</b></dt>\n<dd>The value with which the counter is reloaded in case of <em>En"
"able Register Reload</em> is activated</dd>\n</dl>\n\n<h4>Inputs</h4>\nEnable"
" <tt><b>Control Input Port</b></tt> or <tt><b>Preset Input Port</b></tt>. Ref"
"er to the documentation for these rather complex inputs. The ordering of the "
"inputs matches the ordering in the configuration mask.\n\n<h4>Output Data Typ"
"e</h4>\nChoose the block's output data type for the output signal. Available "
"are:\n<ul>\n<li><b><tt>Raw</tt></b> outputting the internal raw value as <tt>"
"uint32_T</tt> as appropriate\n<li><b><tt>Double</tt></b> outputting 0..1 corr"
"esponding to the Full Scale. Full Scale is affected by the Frame Type, SSI Fr"
"ame Size and Data Length. Refer to manufactuer's documentation.\n</ul>\n\n<h4"
">Outputs</h4>\nSelect the desired outputs as presented int the configuratoin "
"mask. The ordering matches the ordering in the mask. Refer to manufacturors d"
"ocumentation.\n\n<p>\nSet the <b>Sample Time</b> for the block. <tt>0</tt> is"
" continuous sample time (runs at the model's base rate). Setting <tt>-1</tt> "
"will try to set the time using back propagation.\n"
	  MaskPromptString	  "Master|Slave Index|Enable Register Reload|E"
"nable Index Reset|Enable FWD Count|Gate|Frequency Window (0..65535)|Counter R"
"eload Value (0..65535)  |Control Input Port|Preset Input Port|Output Data Typ"
"e|Counter Value Output Port|Latch Output Port|Frequency Output Port|Period Ou"
"tput Port|Window Output Port|Status Output Port|Sample Time (-1 inherited)"
	  MaskStyleString	  "edit,edit,checkbox,checkbox,checkbox,popup("
"None|Positive|Negative),edit,edit,checkbox,checkbox,popup(Raw bits|Double),ch"
"eckbox,checkbox,checkbox,checkbox,checkbox,checkbox,edit"
	  MaskTunableValueString  "off,off,off,off,off,off,off,off,off,off,off"
",off,off,off,off,off,off,off"
	  MaskCallbackString	  "||el5101_check('Reload');|el5101_check('Ind"
"exReset');|||||||||el5101_check('Latch');|el5101_check('Freq');||||"
	  MaskEnableString	  "on,on,on,on,on,off,off,off,on,on,on,on,on,o"
"n,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on,on,on,on,on,o"
"n,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on,on,on,on,on,o"
"n,on,on,on"
	  MaskVarAliasString	  ",,,,,,,,,,,,,,,,,"
	  MaskVariables		  "master=@1;index=@2;reload=@3;reset=@4;fwdco"
"unt=@5;gate=@6;freqwin=@7;reloadvalue=@8;control=@9;preset=@10;dtype=@11;valu"
"e=@12;latch=@13;freq=@14;period=@15;window=@16;status=@17;tsample=@18;"
	  MaskInitialization	  "try\n    [master domain alias position mast"
"erStr positionStr] = ...\n        getEtherCATLocation(gcb,master,index);\ncat"
"ch\n    errordlg(lasterr);\n    masterStr = '';\n    positionStr = '';\nend\n"
"\nAddress = struct(...\n    'Master',   master, ...\n    'Domain',   domain, "
"...\n    'Alias',    alias, ...\n    'Position', position);\n\nEtherCATInfo ="
" struct(...\n    'VendorId', 2,...\n    'ProductCode', hex2dec('13ed3052'), ."
"..\n    'Type', 'EL5101', ...\n    'RevisionNo', 0, ...\n    'SyncManager', c"
"ell(1));\nLayoutVersion = 0;\n\nEtherCATInfo.SyncManager{1} = struct(...\n   "
" 'SmIndex', 0,...\n    'SmDir', 1, ...\n    'Pdo',[]...\n    );\n\n% PDO Entr"
"y is a definition of all PDO's that exist in the slave\n% List here a matrix,"
" where every row has 3 elements:\n% 1: PDO index\n% 2: PDO subindex\n% 3: Bit"
" size (8,16,32); Negative values mean signed values\npdo_entry = [ ...\n    h"
"ex2dec('6000'), 1, 8,  8 ; ...     % Status\n    hex2dec('0000'), 0, 8,  8 ; "
"...     % Alignment space\n    hex2dec('6000'), 2, 16, 16; ...     % Value\n "
"   hex2dec('6000'), 3, 16, 16; ...     % Latch\n    hex2dec('6000'), 4, 32, 3"
"2; ...     % Frequency\n    hex2dec('6000'), 5, 16, 16; ...     % Period\n   "
" hex2dec('6000'), 6, 16, 16; ...     % Window\n    hex2dec('7000'), 1, 8,  8 "
"; ...     % Control\n    hex2dec('0000'), 0, 8,  8 ; ...     % Alignment spac"
"e\n    hex2dec('7000'), 2, 16, 16];        % Input Value\npdo_entry_struct = "
"cell2struct(...\n    num2cell(pdo_entry),...\n    {'Index' 'SubIndex' 'BitLen"
"' 'DataType'},...\n    2);\n\nEtherCATInfo.SyncManager{1} = struct(...\n    '"
"SmIndex', 2,...\n    'SmDir', 0, ...\n    'Pdo', struct(...\n        'Index',"
"hex2dec('1601'),...\n        'Entry',pdo_entry_struct([8 9 10])));\nEtherCATI"
"nfo.SyncManager{2} = struct(...\n    'SmIndex', 3,...\n    'SmDir', 1, ...\n "
"   'Pdo', struct(...\n        'Index',hex2dec('1A01'),...\n        'Entry',pd"
"o_entry_struct([1:4])));\n\nif freq || period || window\n    EtherCATInfo.Syn"
"cManager{2}.Pdo(2) = struct(...\n        'Index',hex2dec('1A02'),...\n       "
" 'Entry',pdo_entry_struct([5:7]));\nend\n\n% SDO Config is the configuration "
"of a slave\n% It is a matrix, every row having 4 elements:\n% 1: SDO Index\n%"
" 2: SDO Subindex\n% 3: Size    (8,16,32)\n% 4: value\nSdoConfig = [\n    hex2"
"dec('8000'), 1,  8, reloadvalue == 1;... % Reload\n    hex2dec('8000'), 2,  8"
", reset == 1      ;... % Index Reset\n    hex2dec('8000'), 3,  8, fwdcount =="
" 1   ;... % Forward Count\n    hex2dec('8000'), 4,  8, gate == 2       ;... %"
" Positive Gate\n    hex2dec('8000'), 5,  8, gate == 3       ;... % Negative G"
"ate\n    hex2dec('8001'), 1, 16, freqwin         ;... % Frequency Window\n   "
" hex2dec('8001'), 2, 16, reloadvalue     ;... % Reload Value\n    ];\nSdoConf"
"ig = cell2struct(...\n    num2cell(SdoConfig),...\n    {'Index' 'SubIndex' 'B"
"itLen' 'Value'}, 2);\n\n% This maps ???\n% It is a matrix, every row having 4"
" elements:\n% 1: PDO direction as seen by the slave: 0 = output; 1 = Input\n%"
" 2: PDO Index\n% 3: Starting row of PDO entry (Zero based)\n% 4: Number of PD"
"O entry rows\nport = 1;\nIOSpec = [];\nif value\n    IOSpec(port).PdoEntry = "
"[hex2dec('6000') 2];\n    if dtype == 2\n        IOSpec(port).PdoFullScale = "
"2^16;\n    end\n    \n    port = port + 1;\nend\nif latch\n    IOSpec(port).P"
"doEntry = [hex2dec('6000') 3];\n    if dtype == 2\n        IOSpec(port).PdoFu"
"llScale = 2^16;\n    end\n    \n    port = port + 1;\nend\nif freq\n    IOSpe"
"c(port).PdoEntry = [hex2dec('6000') 4];\n    if dtype == 2\n        IOSpec(po"
"rt).PdoFullScale = 2^32;\n    end\n    \n    port = port + 1;\nend\nif period"
"\n   IOSpec(port).PdoEntry = [hex2dec('6000') 5];\n   if dtype == 2\n        "
"IOSpec(port).PdoFullScale = 2^16;\n    end\n    \n    port = port + 1;\nend\n"
"if window\n    IOSpec(port).PdoEntry = [hex2dec('6000') 6];\n    if dtype == "
"2\n        IOSpec(port).PdoFullScale = 2^16;\n    end\n    \n    port = port "
"+ 1;\nend\nif status\n    IOSpec(port).PdoEntry = [hex2dec('6000') 1];\n    "
"\n    port = port + 1;\nend\n\nif control\n    IOSpec(port).PdoEntry = [hex2d"
"ec('7000') 1];\n    \n    port = port + 1;\nend\nif preset\n    IOSpec(port)."
"PdoEntry = [hex2dec('7000') 2];\n    if dtype == 2\n        IOSpec(port).PdoF"
"ullScale = 2^16;\n    end\n    \n    port = port + 1;\nend\n"
	  MaskDisplay		  "fprintf('EL5101\\nIncr.-Enc\\nM:%s Idx:%s',"
"...\n    masterStr, positionStr)\n"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|1|off|off|off|None|100|65535|off|off|Doub"
"le|on|off|off|off|off|off|0"
	  MaskTabNameString	  ",,,,,,,,,,,,,,,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "Generic Slave"
	  Ports			  []
	  Position		  [170, 259, 250, 301]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ec_slave2"
	  Parameters		  "Address,EtherCATInfo,LayoutVersion,SdoConfi"
"g,IOSpec,tsample"
	  MaskType		  "Generic EtherCAT Slave"
	  MaskDescription	  "Implements a generic EtherCAT Slave as desc"
"ribed in the EtherCATInfo XML File"
	  MaskPromptString	  "Master|Slave Index|EtherCATInfo XML file|Pr"
"oduct Code|Revision (empty for latest)|Mapped PDO (empty for all)|SDO Config|"
"Sample Time (-1 inherited)"
	  MaskStyleString	  "edit,edit,edit,edit,edit,edit,edit,edit"
	  MaskTunableValueString  "off,off,off,off,off,off,off,off"
	  MaskCallbackString	  "|||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,,"
	  MaskVariables		  "master=@1;index=@2;ethercatinfo=@3;product_"
"code=@4;revision=@5;pdo_list=@6;sdo_config=@7;tsample=@8;"
	  MaskInitialization	  "try\n    [master domain alias position mast"
"erStr positionStr] = ...\n        getEtherCATLocation(gcb,master,index);\ncat"
"ch\n    errordlg(lasterr);\n    masterStr = '';\n    positionStr = '';\nend\n"
"\nAddress = struct(...\n    'Master',   master, ...\n    'Domain',   domain, "
"...\n    'Alias',    alias, ...\n    'Position', position);\n\nSdoConfig = []"
";\n\nEtherCATInfo = [];\nproduct_name = 'Unknown';\nLayoutVersion = 0;\nif is"
"char(ethercatinfo) && max(size(ethercatinfo))\n    if product_code\n        E"
"therCATInfo = ...\n            getEtherCATInfo(ethercatinfo,product_code,[],["
"]);\n        product_name = EtherCATInfo.Type;\n        LayoutVersion = Ether"
"CATInfo.RevisionNo;\n    end\nelse\n    if max(size(ethercatinfo))\n        e"
"rrordlg([gcb ': Enter a file name for EtherCATInfo.']);\n    end\nend\n \npdo"
"_entry = generateIOs(EtherCATInfo,0);\nif isempty(EtherCATInfo)\n    IOSpec ="
" [];\nelse\n    IOSpec = cell2struct(pdo_entry,'PdoEntry',1);\nend\n"
	  MaskDisplay		  "fprintf('%s\\nM:%s Idx:%s',...\n    product"
"_name,masterStr,positionStr);\n"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|1|''|hex2dec('0')|[]|[]|[]|0"
	  MaskTabNameString	  ",,,,,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "Infrastructure"
	  Ports			  []
	  Position		  [315, 140, 405, 180]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ec_slave2"
	  Parameters		  "Address,EtherCATInfo,LayoutVersion,SdoConfi"
"g,output,tsample"
	  MaskType		  "Infrastructure Block"
	  MaskPromptString	  "Master|Slave Index|Device Model |Sample Tim"
"e (-1 inherited)"
	  MaskStyleString	  "edit,edit,popup(EK1100|EK1110|EL9110|EL9160"
"|EL9210|EL9260),edit"
	  MaskTunableValueString  "off,off,off,off"
	  MaskCallbackString	  "|||"
	  MaskEnableString	  "on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on"
	  MaskToolTipString	  "on,on,on,on"
	  MaskVarAliasString	  ",,,"
	  MaskVariables		  "master=@1;index=@2;model=&3;tsample=@4;"
	  MaskInitialization	  "try\n    [master domain alias position mast"
"erStr positionStr] = ...\n        getEtherCATLocation(gcb,master,index);\ncat"
"ch\n    errordlg(lasterr);\n    masterStr = '';\n    positionStr = '';\nend\n"
"\nAddress = struct(...\n    'Master',   master, ...\n    'Domain',   domain, "
"...\n    'Alias',    alias, ...\n    'Position', position);\n\nSdoConfig = []"
";\n\n\n% Find the product code from the available models\nmodels = { ...\n%  "
" Code     Product Code        \n    'EK1100' hex2dec('044c2c52') 'EtherCAT Co"
"upler'     0; ...\n    'EK1110' hex2dec('04562c52') 'EtherCAT Extension'   0;"
" ...\n    'EL9110' hex2dec('23963052') '24V w. Diag.'         1; ...\n    'EL"
"9160' hex2dec('23c83052') '230V w. Diag.'        1; ...\n    'EL9210' hex2dec"
"('23fa3052') '24V w. Fuse & Diag.'  2; ...\n    'EL9260' hex2dec('242c3052') "
"'230V w. Fuse & Diag.' 2; ...\n    };\nproduct_code = 0;\nidx = find(strcmp(m"
"odels(:,1),model),1);\nfunc = '';\nchannels = 0;\nif ~isempty(idx)\n    produ"
"ct_code  = cell2mat(models(idx,2));\n    func          = cell2mat(models(idx,"
"3));\n    channels      = cell2mat(models(idx,4));\nend\nif ~product_code\n  "
"  errordlg([gcb ': Slave model \"' model '\" is not implemented'])\nend\n\nEt"
"herCATInfo = struct(...\n    'VendorId', 2,...\n    'ProductCode', product_co"
"de, ...\n    'Type', model);\n\n% Number of channels is given by the 6'th cha"
"racter of model string\nLayoutVersion = 0;\n% Create a matrix \n% pdo_entry  "
"= [ 0x6000 1 1;\n%                0x6010 1 1;\n%                .... \n%     "
"          ]\n% with (channel) number of rows\nif channels\n    pdo_entry = on"
"es(channels,4);\n    pdo_entry(:,1) = ...\n        [hex2dec('6000'):16:hex2de"
"c('6000')+(channels-1)*16]';\n    pdo_entry_struct = cell2struct(...\n       "
" num2cell(pdo_entry),...\n        {'Index' 'SubIndex' 'BitLen' 'DataType'},.."
".\n        2);\n\n    pdo = struct('Index',0,'Entry',{});\n    for i = [1:cha"
"nnels]\n        pdo(i) = struct(...\n            'Index',hex2dec('1A00')+i-1,"
"...\n            'Entry',pdo_entry_struct(i));\n    end\n    EtherCATInfo.Syn"
"cManager{1} = struct(...\n        'SmIndex', 0,...\n        'SmDir', 1, ...\n"
"        'Pdo',pdo...\n        );\nend\n\nSdoConfig = [];\n\nif channels\n    "
"output.PdoEntry = pdo_entry([1 2],[1 2]);\nelse\n    output = [];\nend\n\n"
	  MaskDisplay		  "fprintf('%s\\n%s\\nM:%s Idx:%s',...\n    mo"
"del,func,masterStr,positionStr)\n\n"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|0|EK1100|0"
	  MaskTabNameString	  ",,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "K-Bus"
	  Ports			  []
	  Position		  [25, 260, 105, 301]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ec_slave2"
	  Parameters		  "Address,EtherCATInfo,LayoutVersion,SdoConfi"
"g,IOSpec,tsample"
	  MaskType		  "K-Bus Coupler"
	  MaskDescription	  "Beckhoff EK1110 K-Bus to EtherCAT Coupler\n"
"\nMerge Pdo Entries:\n  * All in PDO: This option merges Pdo Entries in a PDO"
" with the same data type together\n  * All: All Pdo Entries with the same dat"
"a type are merged together"
	  MaskHelp		  "This block provides an interface to the K-B"
"us process image for the EK1120 Coupler.\n<p>\nChoose and set the following o"
"ptions:\n<h4>Master:</h4>\nSet the EtherCAT Master of this terminal.\n\n<h4>S"
"lave Index:</h4>\nSet the EtherCAT slave index. Following address formats are"
" allowed:\n<ol>\n<li> Absolute addressing: a string '<b><tt>n</tt></b>' repre"
"senting the (zero based) absolute index. <b><tt>n</tt></b> is typically large"
"r than 0 because the first coupler has that address.\n\n<li> SSId addressing:"
" the Secondary Slave Addressing has the form '<b><tt>#s:n</tt></b>' where <b>"
"<tt>s</tt></b> is the Secondary Slave Id of the EtherCAT coupler and <b><tt>n"
"</tt></b> is the offset in that field. The SSId has to be preprogrammed into "
"the coupler with other service tools.\n</ol>\n\n<h4>EtherCATInfo XML File:</h"
"4>\nA string path pointing to the XML description of the k-Bus Coupler\n\n<h4"
">Sample Time:</h4>\nSet the <b>Sample Time</b> for the block. <tt>0</tt> is c"
"ontinuous sample time (runs at the model's base rate). Setting <tt>-1</tt> wi"
"ll try to set the time using back propagation.\n\n"
	  MaskPromptString	  "Master|Slave Index|EtherCATInfo XML file|Me"
"rge Pdo Entries|Sample Time (-1 inherited)"
	  MaskStyleString	  "edit,edit,edit,popup(None|All in PDO|All),e"
"dit"
	  MaskTunableValueString  "off,off,off,off,off"
	  MaskCallbackString	  "||||"
	  MaskEnableString	  "on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on"
	  MaskVarAliasString	  ",,,,"
	  MaskVariables		  "master=@1;index=@2;ethercatinfo=@3;merge=@4"
";tsample=@5;"
	  MaskInitialization	  "try\n    [master domain alias position mast"
"erStr positionStr] = ...\n        getEtherCATLocation(gcb,master,index);\ncat"
"ch\n    errordlg(lasterr);\n    masterStr = '';\n    positionStr = '';\nend\n"
"\nAddress = struct(...\n    'Master',   master, ...\n    'Domain',   domain, "
"...\n    'Alias',    alias, ...\n    'Position', position);\n\nSdoConfig = []"
";\n\nproduct_code = hex2dec('04602c22');\ntype = 'BK1120';\n\n% Make a random"
" revision number for every instance. This\n% ensures that a separate configur"
"ation is written for every\n% BK1120\nLayoutVersion = uint32(2^32*rand);\n\ni"
"f ischar(ethercatinfo) && max(size(ethercatinfo))\n    EtherCATInfo = ...\n  "
"      getEtherCATInfo(ethercatinfo,product_code,[],[]);\n    EtherCATInfo.Typ"
"e = type;\n    pdo_entry = generateIOs(EtherCATInfo,0);\n    IOSpec = cell2st"
"ruct(pdo_entry,'PdoEntry',1);\nelse\n    if max(size(ethercatinfo))\n        "
"errordlg([gcb ': Enter a file name for EtherCATInfo.']);\n    end\n    IOSpec"
" = [];\nend\n\n"
	  MaskDisplay		  "fprintf('BK1120\\nK-Bus Coupler\\nM:%s Idx:"
"%s',...\n    masterStr,positionStr);\n"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|1|''|None|0"
	  MaskTabNameString	  ",,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "MSD_0"
	  Ports			  [2, 2]
	  Position		  [325, 217, 460, 288]
	  BackgroundColor	  "yellow"
	  FunctionName		  "moog_msd"
	  Parameters		  "master,index,tsample,iomode"
	  MaskType		  "Moog MSC"
	  MaskDescription	  "Moog Servodrive Controller"
	  MaskPromptString	  "Master|Slave Index|Sample Time|Input/Output"
" Mode"
	  MaskStyleString	  "edit,edit,edit,popup(Inputs and Outputs|Inp"
"uts only|Outputs only)"
	  MaskTunableValueString  "off,off,off,off"
	  MaskCallbackString	  "|||moog_msd_callback('display_callback',gcb"
")"
	  MaskEnableString	  "on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on"
	  MaskToolTipString	  "on,on,on,on"
	  MaskVarAliasString	  ",,,"
	  MaskVariables		  "master=@1;index=&2;tsample=@3;iomode=@4;"
	  MaskInitialization	  "moog_msd_callback('display_callback',gcb)"
	  MaskDisplay		  "fprintf('Moog Servo Drive\\nM:%i Idx:%s', m"
"aster, index) image(imread('moog.png'), [.3, .7, .4, .2]) port_label('input',"
" 1, 'control') port_label('input', 2, 'v_tgt') port_label('output', 1, 'statu"
"s') port_label('output', 2, 'v_cur')"
	  MaskSelfModifiable	  on
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "normalized"
	  MaskValueString	  "0|0|0|Inputs and Outputs"
	  MaskTabNameString	  ",,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "Master State"
	  Ports			  [0, 3]
	  Position		  [315, 29, 390, 61]
	  BackgroundColor	  "yellow"
	  FunctionName		  "master_state"
	  Parameters		  "master,tsample"
	  MaskType		  "Master State"
	  MaskDescription	  "Outputs master state:\n* number of respondi"
"ng slaves\n* Slave states\n* Link up\n"
	  MaskPromptString	  "Master|Sample Time"
	  MaskStyleString	  "edit,edit"
	  MaskTunableValueString  "off,off"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskVarAliasString	  ","
	  MaskVariables		  "master=@1;tsample=@2;"
	  MaskDisplay		  "fprintf('Master State\\nM: %u',\nmaster);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|0"
	  MaskTabNameString	  ","
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "SSI_0"
	  Ports			  [0, 1]
	  Position		  [25, 140, 105, 180]
	  BackgroundColor	  "yellow"
	  FunctionName		  "ec_slave2"
	  Parameters		  "Address,EtherCATInfo,LayoutVersion,SdoConfi"
"g,output,tsample"
	  MaskType		  "EL5001"
	  MaskDescription	  "Beckhoff EtherCAT SSI Input"
	  MaskHelp		  "This block implements the EtherCAT SSI Inpu"
"t Terminal EL5001.\n\nThe first output is data, the second optional output is"
" a Status Byte. Various options affect the behaviour of the terminal and the "
"block's output:\n\n<h4>Master:</h4>\nSet the EtherCAT Master of this terminal"
".\n\n<h4>Slave Index:</h4>\nSet the EtherCAT slave index. Following address f"
"ormats are allowed:\n<ol>\n<li> Absolute addressing: a number <<b><tt>n</tt><"
"/b>> representing the (zero based) absolute index. <b><tt>n</tt></b> is typic"
"ally larger than 0 because the first coupler has that address.\n\n<li> SSId a"
"ddressing: the Secondary Slave Addressing has the form <<b><tt>#s:n</tt></b>>"
" where <b><tt>s</tt></b> is the Secondary Slave Id of the EtherCAT coupler an"
"d <b><tt>n</tt></b> is the offset in that field. The SSId has to be preprogra"
"mmed into the coupler with other service tools.\n</ol>\n\n<h4>Output Full Sca"
"le</h4>\nWhen <b>Output Data Type</b> is set to <b>Double with scale and offs"
"et</b>, the block's output value at full scale terminal input can be set here"
". This value  directly affects the output despite a possible output LPF filte"
"r.\n\n<h4>Output Offset</h4>\nWhen <b>Output Data Type</b> is set to <b>Doubl"
"e with scale and offset</b>, the blocks output at zero terminal input can be "
"set here. Note that the Full Scale above is also increased by this amount. Th"
"is value  directly affects the output despite a possible output LPF filter.\n"
"\n<h4>Output Data Type</h4>\nChoose the block's output data type for the outp"
"ut signal. Available are:\n<ul>\n<li><b><tt>Raw</tt></b> outputting the inter"
"nal raw value as <tt>uint32_T</tt> as appropriate\n<li><b><tt>Double</tt></b>"
" outputting 0..1 corresponding to the Full Scale. Full Scale is affected by t"
"he Frame Type, SSI Frame Size and Data Length. Refer to manufactuer's documen"
"tation.\n<li><b><tt>Double with scale and offset</tt></b>, allowing the outpu"
"t to be scaled with an offset.\n</ul>\n\n<p>\nFor <b>SSI Code</b>, <b>Baudrat"
"e</b>, <b>Frame Type</b>, <b>SSI Frame Size</b>, <b>Data Length</b>, <b>Disab"
"le Frame Error</b>, <b>Enable Inhibit Time</b> and <b>Min Inhibit Time</b>, r"
"efer to manufacturer's documentation.\n<p> \nChoosing <b>Status Output</b> pr"
"ovides a port of type <tt>uint8_T</tt> where the status is presented. Refer t"
"o manufacturors documentation for the used coding.\n\n<h4>Output Filter</h4>"
"\nWhen not in <b>Raw</b> mode, the <b>Output Filter</b> checkbox becomes avai"
"lable, allowing the use of an internal low pass filter. Enter the <b>LPF Time"
" Constant</b> for the filter in the field below.\n<br>For continuous sample t"
"ime systems (0 in Sample Time), the filter is also continuous. Discrete sampl"
"es systems (Sample Time > 0) uses an equivalent discrete low pass filter with"
" a similar time constant.\n\n<p>\nSet the <b>Sample Time</b> for the block. <"
"tt>0</tt> is continuous sample time (runs at the model's base rate). Setting "
"<tt>-1</tt> will try to set the time using back propagation.\n"
	  MaskPromptString	  "Master|Slave Index|Output Full Scale|Output"
" Offset|Output Data Type|SSI Code |Baudrate |Frame Type |SSI Frame Size |Data"
" Length |Disable Frame Error|Enable Inhibit Time|Min Inhibit Time [us] (1..65"
"535)|Status Output|Output Filter|LPF Time Constant (sec)|Sample Time"
	  MaskStyleString	  "edit,edit,edit,edit,popup(Raw bits|Double|D"
"ouble with scale and offset),popup(Binary|Gray),popup(1250k|1000k|500k|250k|1"
"25k),popup(Multiturn (25 bits)|Singleturn (13 bits)|Variable (set size in Fra"
"me Size)),popup(1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|20|21|22|23|2"
"4|25|26|27|28|29|30|31|32),popup(1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18"
"|19|20|21|22|23|24|25|26|27|28|29|30|31|32),checkbox,checkbox,edit,checkbox,c"
"heckbox,edit,edit"
	  MaskTunableValueString  "off,off,off,off,off,off,off,off,off,off,off"
",off,off,off,off,on,off"
	  MaskCallbackString	  "||||el5001_check('dtype');|||el5001_check('"
"frame');||||el5001_check('inhibit');|el5001_check('inh_time');||el5001_check("
"'filter');||"
	  MaskEnableString	  "on,on,off,off,on,on,on,on,off,on,on,on,off,"
"on,on,off,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on,on,on,on,on,on,on,on,o"
"n,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on,on,on,on,on,on,on,on,o"
"n,on,on"
	  MaskVarAliasString	  ",,,,,,,,,,,,,,,,"
	  MaskVariables		  "master=@1;index=@2;scale=@3;offset=@4;dtype"
"=@5;code=@6;baud=@7;frame=@8;fsize=@9;length=@10;frame_error=@11;inhibit=@12;"
"inh_time=@13;status=@14;filter=@15;tau=@16;tsample=@17;"
	  MaskInitialization	  "try\n    [master domain alias position mast"
"erStr positionStr] = ...\n        getEtherCATLocation(gcb,master,index);\ncat"
"ch\n    errordlg(lasterr);\n    masterStr = '';\n    positionStr = '';\nend\n"
"\nAddress = struct(...\n    'Master',   master, ...\n    'Domain',   domain, "
"...\n    'Alias',    alias, ...\n    'Position', position);\n\nEtherCATInfo ="
" struct(...\n    'VendorId', 2,...\n    'ProductCode', hex2dec('13893052'), ."
"..\n    'Type', 'EL5001', ...\n    'RevisionNo', 0, ...\n    'SyncManager', c"
"ell(1));\nLayoutVersion = 0;\n\nEtherCATInfo.SyncManager{1} = struct(...\n   "
" 'SmIndex', 0,...\n    'SmDir', 1, ...\n    'Pdo',[]...\n    );\n\n% PDO Entr"
"y is a definition of all PDO's that exist in the slave\n% List here a matrix,"
" where every row has 3 elements:\n% 1: PDO index\n% 2: PDO subindex\n% 3: Bit"
" size (8,16,32); Negative values mean signed values\npdo_entry = [ ...\n    h"
"ex2dec('6000'), 1, 8  8; ...\n    hex2dec('6000'), 2, 32 32];\npdo_entry_stru"
"ct = cell2struct(...\n    num2cell(pdo_entry),...\n    {'Index' 'SubIndex' 'B"
"itLen' 'DataType'},...\n    2);\n\nEtherCATInfo.SyncManager{1} = struct(...\n"
"    'SmIndex', 3,...\n    'SmDir', 1, ...\n    'Pdo', struct(...\n        'In"
"dex',hex2dec('1A00'),...\n        'Entry',pdo_entry_struct));\n\n% SDO Config"
" is the configuration of a slave\n% It is a matrix, every row having 4 elemen"
"ts:\n% 1: SDO Index\n% 2: SDO Subindex\n% 3: Size    (8,16,32)\n% 4: value\nS"
"doConfig = [\n    hex2dec('4061'), 1,  8, frame_error     ;... % FrameError\n"
"    hex2dec('4061'), 2,  8, 1               ;... % Power Fail\n    hex2dec('4"
"061'), 3,  8, inhibit         ;... % Enable Inhibit\n    hex2dec('4066'), 0, "
" 8, code == 2       ;... % SSI Code\n    hex2dec('4067'), 0, 16, baud        "
"    ;... % Baud Rate\n    hex2dec('4068'), 0,  8, frame-1         ;... % Fram"
"e Type\n    hex2dec('4069'), 0, 16, fsize           ;... % Frame Size\n    he"
"x2dec('406A'), 0, 16, length          ;... % Data Length\n    hex2dec('406B')"
", 0, 16, inh_time        ;... % Inhibit Time\n    ];\nSdoConfig = cell2struct"
"(...\n    num2cell(SdoConfig),...\n    {'Index' 'SubIndex' 'BitLen' 'Value'},"
" 2);\n\n\noutput.PdoEntry = struct(...\n    'PdoEntryIndex', pdo_entry(2,1),."
"..\n    'PdoEntrySubIndex', pdo_entry(2,2));\nif dtype ~= 1\n    output.PdoFu"
"llScale = 2^pdo_entry(2,3);\n    if dtype == 3\n        output.Gain = scale;"
"\n        output.Offset = offset;\n        output.GainName = 'FullScale';\n  "
"      output.OffsetName = 'Offset';\n    end\n    if filter\n        if sum(t"
"au == 0)\n            errordlg([gcb ': Specify a nonzero time constant '...\n"
"                'for the output filter.']);\n        end\n        if (tsample"
")\n            output.Filter = tsample/tau;\n            output.FilterName = "
"'InputWeight';\n        else\n            output.Filter = 2*pi/tau;\n        "
"    output.FilterName = 'Omega';\n        end\n    end\nend\n\nif status\n   "
" output(2).PdoEntry = struct(...\n        'PdoEntryIndex', pdo_entry(1,1),..."
"\n        'PdoEntrySubIndex', pdo_entry(1,2));\nend\n"
	  MaskDisplay		  "fprintf('EL5001\\nSSI Input\\nM:%s Idx:%s',"
"...\n    masterStr,positionStr)\n\n"
	  MaskSelfModifiable	  on
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "0|1|1|0|Double|Binary|1250k|Multiturn (25 b"
"its)|25|24|off|off|1|off|off|0.1|0"
	  MaskTabNameString	  ",,,,,,,,,,,,,,,,"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Generate Code"
      Ports		      []
      Position		      [106, 15, 209, 55]
      BackgroundColor	      "lightBlue"
      ShowName		      off
      OpenFcn		      "model=bdroot;     \ntry               \n  rtwbu"
"ild(model);\ncatch             \n  error(lasterr); \nend               \n    "
"              "
      FontName		      "Arial"
      FontSize		      12
      FontWeight	      "bold"
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      MaskHideContents	      off
      MaskDisplay	      "disp(['Generate Code\\n',...\n	  '(doubl"
"e-click)'])"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"Generate Code"
	Location		[1035, 233, 1395, 566]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Hilscher"
      Ports		      []
      Position		      [295, 229, 366, 290]
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      MaskHideContents	      off
      System {
	Name			"Hilscher"
	Location		[20, 469, 368, 718]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"A4"
	PaperUnits		"centimeters"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  "S-Function"
	  Name			  "PD_In"
	  Ports			  [0, 1]
	  Position		  [45, 25, 115, 65]
	  BackgroundColor	  "yellow"
	  FunctionName		  "cif_pd_in"
	  Parameters		  "device,addr,ip_type,width,swap,op_type,tsam"
"ple"
	  MaskType		  "Profibus Input"
	  MaskDescription	  "Hilscher CIF-80PB Profibus Input"
	  MaskHelp		  "This block provides an interface to the Pro"
"fibus incoming process image for the Hilscher CIF-80PB Card.\n<p>\nSupply the"
" following information:<br>\n<b>PCI Device</b>: Either supply the address in "
"PCI-Addressing format <em>bus:slot</em> (hexadecimal format), or the (decimal"
") position as cards are detected "
	  MaskPromptString	  "PCI Device|Address|Sensor Data Type|Vector "
"Length|Swap Input Bytes|Output Data Format|Sample Time (-1 inherited)"
	  MaskStyleString	  "edit,edit,popup(Bit0|Bit1|Bit2|Bit3|Bit4|Bi"
"t5|Bit6 |Bit7|int8_T|uint8_T|int16_T|uint16_T|int32_T|uint32_T),edit,checkbox"
",popup(int8|uint8|int16|uint16|int32|uint32|boolean|double|single|Inherited v"
"ia back propagation),edit"
	  MaskTunableValueString  "off,off,off,off,off,off,off"
	  MaskCallbackString	  "||||||"
	  MaskEnableString	  "on,on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,,"
	  MaskVariables		  "device=&1;addr=@2;ip_type=@3;width=@4;swap="
"@5;op_type=@6;tsample=@7;"
	  MaskInitialization	  "device = test_var(device);"
	  MaskDisplay		  "fprintf('CIF-80PB\\nPCI: %s\\nAddr:%i',\nde"
"vice,addr);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "01:0E|120|int8_T|8|off|int8|0"
	  MaskTabNameString	  ",,,,,,"
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  "PD_Out"
	  Ports			  [1]
	  Position		  [40, 100, 110, 140]
	  BackgroundColor	  "yellow"
	  FunctionName		  "cif_pd_out"
	  Parameters		  "device,addr,op_type,swap,tsample"
	  MaskType		  "Profibus Input"
	  MaskDescription	  "Hilscher CIF-80PB Profibus Output"
	  MaskHelp		  "This block provides an interface to the Pro"
"fibus outgoing process image for the Hilscher CIF-80PB Card.\n<p>\nSupply the"
" following information:<br>\n<b>PCI Device</b>: Either supply the address in "
"PCI-Addressing format <em>bus:slot</em> (hexadecimal format), or the (decimal"
") position as cards are detected "
	  MaskPromptString	  "PCI Device|Address|Actuator Data Type|Swap "
"Input Bytes|Sample Time (-1 inherited)"
	  MaskStyleString	  "edit,edit,popup(Bit0|Bit1|Bit2|Bit3|Bit4|Bi"
"t5|Bit6 |Bit7|int8_T|uint8_T|int16_T|uint16_T|int32_T|uint32_T),checkbox,edit"
	  MaskTunableValueString  "off,off,off,off,off"
	  MaskCallbackString	  "||||"
	  MaskEnableString	  "on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on"
	  MaskVarAliasString	  ",,,,"
	  MaskVariables		  "device=&1;addr=@2;op_type=@3;swap=@4;tsampl"
"e=@5;"
	  MaskInitialization	  "device = test_var(device);"
	  MaskDisplay		  "fprintf('CIF-80PB\\nPCI: %s\\nAddr:%i',\nde"
"vice,addr);"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "01:0E|120|int8_T|off|-1"
	  MaskTabNameString	  ",,,,"
	}
      }
    }
    Block {
      BlockType		      "S-Function"
      Name		      "In"
      Ports		      [0, 1]
      Position		      [445, 210, 525, 250]
      BackgroundColor	      "yellow"
      FunctionName	      "etherlab_in"
      Parameters	      "varname,src_dtype,len,scale,offset,out_dtype,ts"
"ample"
      MaskType		      "Generic Output Port"
      MaskPromptString	      "Signal Name|Source Data Type|Array Length|Outpu"
"t Scale|Output Offset|Block Output Data Type|Sample Time (-1 for inherited)"
      MaskStyleString	      "edit,popup(boolean|int8|uint8|int16|uint16|int3"
"2|uint32|single|double),edit,edit,edit,popup(Same as Source|Double|Double wit"
"h Scale and Offset),edit"
      MaskTunableValueString  "off,off,off,off,off,off,off"
      MaskCallbackString      "||||||"
      MaskEnableString	      "on,on,on,on,on,on,on"
      MaskVisibilityString    "on,on,on,on,on,on,on"
      MaskToolTipString	      "on,on,on,on,on,on,on"
      MaskVarAliasString      ",,,,,,"
      MaskVariables	      "varname=@1;src_dtype=@2;len=@3;scale=@4;offset="
"@5;out_dtype=@6;tsample=@7;"
      MaskDisplay	      "fprintf(varname)\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "'SIG01'|boolean|1|0|0|Same as Source|0"
      MaskTabNameString	      ",,,,,,"
    }
    Block {
      BlockType		      "S-Function"
      Name		      "Out"
      Ports		      [1]
      Position		      [445, 145, 525, 185]
      BackgroundColor	      "yellow"
      FunctionName	      "etherlab_out"
      Parameters	      "varname,dtype,tsample"
      MaskType		      "Generic Output Port"
      MaskPromptString	      "Signal Name|Output Data Type|Sample Time (-1 fo"
"r inherited)"
      MaskStyleString	      "edit,popup(Inherited|boolean|int8|uint8|int16|u"
"int16|int32|uint32|int64|uint64|single|double),edit"
      MaskTunableValueString  "off,off,off"
      MaskCallbackString      "||"
      MaskEnableString	      "on,on,on"
      MaskVisibilityString    "on,on,on"
      MaskToolTipString	      "on,on,on"
      MaskVarAliasString      ",,"
      MaskVariables	      "varname=@1;dtype=@2;tsample=@3;"
      MaskDisplay	      "fprintf(varname)\n"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "'SIG01'|Inherited|-1"
      MaskTabNameString	      ",,"
    }
    Block {
      BlockType		      SubSystem
      Name		      "Printf"
      Ports		      [2]
      Position		      [115, 154, 215, 196]
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      MaskHideContents	      off
      MaskPromptString	      "Format String"
      MaskStyleString	      "edit"
      MaskTunableValueString  "off"
      MaskEnableString	      "on"
      MaskVisibilityString    "on"
      MaskToolTipString	      "on"
      MaskVariables	      "format=&1;"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "0"
      System {
	Name			"Printf"
	Location		[761, 352, 1259, 652]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "Trigger"
	  Position		  [75, 58, 105, 72]
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  Inport
	  Name			  "Data"
	  Position		  [75, 128, 105, 142]
	  Port			  "2"
	  IconDisplay		  "Port number"
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "Triggered\nSubsystem"
	  Ports			  [1, 0, 0, 1]
	  Position		  [185, 114, 285, 156]
	  TreatAsAtomicUnit	  on
	  MinAlgLoopOccurrences	  off
	  RTWSystemCode		  "Auto"
	  FunctionWithSeparateData off
	  MaskHideContents	  off
	  System {
	    Name		    "Triggered\nSubsystem"
	    Location		    [409, 398, 907, 698]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    TiledPaperMargins	    [0.500000, 0.500000, 0.500000, 0.500000]
	    TiledPageScale	    1
	    ShowPageBoundaries	    off
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "In1"
	      Position		      [110, 103, 140, 117]
	      IconDisplay	      "Port number"
	    }
	    Block {
	      BlockType		      TriggerPort
	      Name		      "Trigger"
	      Ports		      []
	      Position		      [225, 20, 245, 40]
	      StatesWhenEnabling      "held"
	    }
	    Block {
	      BlockType		      "S-Function"
	      Name		      "S-Function"
	      Ports		      [1, 1]
	      Position		      [200, 95, 260, 125]
	      FunctionName	      "printf"
	      Parameters	      "format"
	    }
	    Line {
	      SrcBlock		      "In1"
	      SrcPort		      1
	      DstBlock		      "S-Function"
	      DstPort		      1
	    }
	  }
	}
	Line {
	  SrcBlock		  "Trigger"
	  SrcPort		  1
	  Points		  [125, 0]
	  DstBlock		  "Triggered\nSubsystem"
	  DstPort		  trigger
	}
	Line {
	  SrcBlock		  "Data"
	  SrcPort		  1
	  Points		  [0, 0]
	  DstBlock		  "Triggered\nSubsystem"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      "S-Function"
      Name		      "Raise"
      Ports		      [1]
      Position		      [170, 235, 230, 265]
      BackgroundColor	      "red"
      CopyFcn		      "raise_check(gcb,'CheckCopy');"
      FunctionName	      "raise"
      Parameters	      "ErrId,ErrStr,TSample"
      MaskPromptString	      "Error Identifier|Error String|Sample Time (-1 i"
"nherited)|Destination Paths|Destination Count"
      MaskStyleString	      "edit,edit,edit,edit,edit"
      MaskTunableValueString  "off,off,off,off,off"
      MaskCallbackString      "raise_check(gcb,'CheckId');||||"
      MaskEnableString	      "on,on,on,off,on"
      MaskVisibilityString    "on,on,on,off,off"
      MaskToolTipString	      "on,on,on,on,on"
      MaskVarAliasString      ",,,,"
      MaskVariables	      "ErrId=&1;ErrStr=&2;TSample=@3;DstPath=&4;DstCou"
"nt=@5;"
      MaskDisplay	      "fprintf('%s',ErrId);"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "E10|Voltage Too High|-1|0|0"
      MaskTabNameString	      ",,,,"
    }
    Block {
      BlockType		      "S-Function"
      Name		      "Raise\nSummary"
      Ports		      []
      Position		      [175, 290, 235, 320]
      BackgroundColor	      "red"
      CopyFcn		      "raise_summary_check(gcb,'CheckCopy');"
      FunctionName	      "raise_summary"
      Parameters	      "ErrId,ErrStr,ErrSrc,DstPath"
      MaskPromptString	      "Error Identifier|Error String|Error Sources|Des"
"tination Paths"
      MaskStyleString	      "edit,edit,edit,edit"
      MaskTunableValueString  "off,off,off,off"
      MaskCallbackString      "|||"
      MaskEnableString	      "on,on,on,off"
      MaskVisibilityString    "on,on,on,off"
      MaskToolTipString	      "on,on,on,on"
      MaskVarAliasString      ",,,"
      MaskVariables	      "ErrId=&1;ErrStr=&2;ErrSrc=&3;DstPath=&4;"
      MaskDisplay	      "fprintf('%s\\n%s',ErrId,ErrSrc);"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "E1x|Voltage Too High|E10|0"
      MaskTabNameString	      ",,,"
    }
    Block {
      BlockType		      "S-Function"
      Name		      "World Time"
      Ports		      [0, 1]
      Position		      [435, 49, 505, 81]
      BackgroundColor	      "yellow"
      FunctionName	      "world_time"
      Parameters	      "tsample"
      MaskType		      "World Time"
      MaskDescription	      "Outputs the current world time for the sample t"
"ime."
      MaskHelp		      "This block outputs the hosts current real world"
" time in seconds since 1.1.1970"
      MaskPromptString	      "Sample Time"
      MaskStyleString	      "edit"
      MaskTunableValueString  "off"
      MaskEnableString	      "on"
      MaskVisibilityString    "on"
      MaskToolTipString	      "on"
      MaskVariables	      "tsample=@1;"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      MaskValueString	      "0"
    }
    Block {
      BlockType		      SubSystem
      Name		      "cbdb"
      Ports		      []
      Position		      [75, 300, 126, 330]
      CopyFcn		      "if ~strcmp(gcs,'rtai_lib')\ndisplay('CopyFcn');"
"       \nend                       "
      DeleteFcn		      "if ~strcmp(gcs,'rtai_lib')\ndisplay('DeleteFcn'"
");     \nend                       "
      UndoDeleteFcn	      "if ~strcmp(gcs,'rtai_lib')\ndisplay('UndoDelete"
"Fcn'); \nend                       "
      LoadFcn		      "if ~strcmp(gcs,'rtai_lib')\ndisplay('LoadFcn');"
"       \nend                       "
      ModelCloseFcn	      "if ~strcmp(gcs,'rtai_lib')\ndisplay('ModelClose"
"Fcn'); \nend                       "
      PreSaveFcn	      "if ~strcmp(gcs,'rtai_lib')\ndisplay('PreSaveFcn"
"');    \nend                       "
      PostSaveFcn	      "if ~strcmp(gcs,'rtai_lib')\ndisplay('PostSaveFc"
"n');   \nend                       "
      InitFcn		      "if ~strcmp(gcs,'rtai_lib')\ndisplay('InitFcn');"
"       \nend                       "
      StartFcn		      "if ~strcmp(gcs,'rtai_lib')\ndisplay('StartFcn')"
";      \nend                       "
      StopFcn		      "if ~strcmp(gcs,'rtai_lib')\ndisplay('StopFcn');"
"       \nend                       "
      NameChangeFcn	      "if ~strcmp(gcs,'rtai_lib')\ndisplay('NameChange"
"Fcn'); \nend                       "
      ClipboardFcn	      "if ~strcmp(gcs,'rtai_lib')\ndisplay('ClipboardF"
"cn');  \nend                       "
      DestroyFcn	      "if ~strcmp(gcs,'rtai_lib')\ndisplay('DestroyFcn"
"');    \nend                       "
      OpenFcn		      "if ~strcmp(gcs,'rtai_lib')\ndisplay('OpenFcn');"
"       \nend                       "
      CloseFcn		      "if ~strcmp(gcs,'rtai_lib')\ndisplay('CloseFcn')"
";      \nend                       "
      ParentCloseFcn	      "if ~strcmp(gcs,'rtai_lib')\ndisplay('ParentClos"
"eFcn');\nend                       "
      MoveFcn		      "if ~strcmp(gcs,'rtai_lib')\ndisplay('MoveFcn');"
"       \nend                       "
      MinAlgLoopOccurrences   off
      RTWSystemCode	      "Auto"
      FunctionWithSeparateData off
      MaskHideContents	      off
      MaskDisplay	      "disp('Callback\\nDebugger');"
      MaskIconFrame	      on
      MaskIconOpaque	      on
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      System {
	Name			"cbdb"
	Location		[65, 462, 230, 544]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"A4"
	PaperUnits		"centimeters"
	TiledPaperMargins	[0.500000, 0.500000, 0.500000, 0.500000]
	TiledPageScale		1
	ShowPageBoundaries	off
	ZoomFactor		"100"
      }
    }
  }
}
