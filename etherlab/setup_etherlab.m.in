function setup_etherlab()

if ~length(strfind(path,strrep('@prefix@','//','/')))
    disp('Adding EtherLAB search directories to $MATLABPATH')
    addpath(strrep('@prefix@/etherlab','//','/'));
    addpath(strrep('@prefix@/blocks','//','/'));
    addpath(strrep('@prefix@/blocks/EtherCAT','//','/'));
    if @EXPERIMENTAL@
       addpath(strrep('@prefix@/blocks/AddiData','//','/'));
       addpath(strrep('@prefix@/blocks/Hilscher','//','/'));
    end
    try
        savepath;
    catch
        disp(['ERROR: Could not save MATLABPATH. Probably ' ...
            'you cannot write the file. Check that ' ...
            'you have write permissions for '...
            '$MATLABPATH/toolbox/local/pathdef.m']);
    end
else
    disp('EtherLAB search directories are already in $MATLABPATH')
end
run @prefix@/blocks/setup.m
run @prefix@/blocks/EtherCAT/setup.m
if @EXPERIMENTAL@
  run @prefix@/blocks/AddiData/setup.m
  run @prefix@/blocks/Hilscher/setup.m
end
return
